<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Glow Cart - Premium digital products marketplace with a futuristic cosmic design">
  <meta name="theme-color" content="#0a0a23">
  <title>Glow Cart - Shop In My Virtual Universe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://js.stripe.com/v3/"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
    
    :root {
      --primary: #00f2fe;
      --primary-dark: #00c2cc;
      --secondary: #4facfe;
      --accent: #f857a6;
      --dark: #0a0a23;
      --darker: #050518;
      --light: #ffffff;
      --gray: #9ca3af;
      --card-bg: rgba(26, 26, 58, 0.7);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: linear-gradient(180deg, var(--darker) 0%, #1a1a3a 100%);
      min-height: 100vh;
      overflow-x: hidden;
      color: var(--light);
      font-family: 'Inter', sans-serif;
    }
    
    /* Audio Player Styles */
    .custom-audio-player {
      filter: hue-rotate(180deg) brightness(1.5);
      border-radius: 20px;
      background: rgba(0, 242, 254, 0.1);
    }
    
    .custom-audio-player::-webkit-media-controls-panel {
      background: rgba(10, 10, 35, 0.8);
      border-radius: 20px;
    }
    
    .custom-audio-player::-webkit-media-controls-play-button,
    .custom-audio-player::-webkit-media-controls-mute-button {
      filter: invert(1) hue-rotate(180deg);
    }
    
    .custom-audio-player::-webkit-media-controls-current-time-display,
    .custom-audio-player::-webkit-media-controls-time-remaining-display {
      color: #00f2fe;
    }
    
    .custom-audio-player::-webkit-media-controls-timeline {
      background-color: rgba(0, 242, 254, 0.2);
      border-radius: 10px;
      height: 4px;
    }
    
    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(26, 26, 58, 0.2);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--primary), var(--secondary));
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(var(--primary-dark), var(--secondary));
    }
    
    /* Grid Background */
    .grid-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: linear-gradient(
          0deg,
          transparent 24%,
          rgba(0, 255, 255, 0.1) 25%,
          transparent 27%,
          transparent 74%,
          rgba(0, 255, 255, 0.1) 75%,
          transparent 77%
        ),
        linear-gradient(
          90deg,
          transparent 24%,
          rgba(0, 255, 255, 0.1) 25%,
          transparent 27%,
          transparent 74%,
          rgba(0, 255, 255, 0.1) 75%,
          transparent 77%
        );
      background-size: 50px 50px;
      z-index: -1;
      opacity: 0.3;
      animation: gridMove 20s linear infinite;
    }
    
    /* Space Scene Elements */
    .space-scene {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      overflow: hidden;
      pointer-events: none;
    }
    
    .central-sphere {
      position: absolute;
      top: 50%;
      left: 15%;
      transform: translate(-50%, -50%);
      width: 150px;
      height: 150px;
      background: radial-gradient(circle at 30% 30%, #00f2fe, #0a0a23);
      border-radius: 50%;
      box-shadow: 0 0 50px rgba(0, 242, 254, 0.8), 0 0 100px rgba(0, 242, 254, 0.4);
      z-index: 1;
    }
    
    .orbital-ring {
      position: absolute;
      top: 50%;
      left: 15%;
      transform: translate(-50%, -50%);
      border: 1px solid rgba(0, 242, 254, 0.3);
      border-radius: 50%;
      animation: rotate 20s linear infinite;
    }
    
    /* Chatbot Button */
    .chatbot-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, var(--primary), var(--secondary));
      box-shadow: 0 0 60px 20px rgba(0, 242, 254, 0.5);
      cursor: pointer;
      z-index: 10;
    }
    
    /* Glassmorphism */
    .glass {
      background: rgba(26, 26, 58, 0.25);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    /* Neon Elements */
    .neon-glow {
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.4);
    }
    
    .neon-text {
      text-shadow: 0 0 5px rgba(0, 255, 255, 0.5), 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    .neon-border {
      border: 1px solid rgba(0, 255, 255, 0.5);
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    /* Authentication Modal Styles */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fadeIn {
      animation: fadeIn 0.3s ease-out forwards;
    }
    
    /* Input focus glow effect */
    input:focus {
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.4);
    }
    
    /* 3D Card Effect */
    .card-3d {
      perspective: 1000px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    /* Navigation and Scrolling Effects */
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      transition: width 0.3s ease;
      opacity: 0;
      border-radius: 2px;
    }
    
    .nav-link:hover::after {
      width: 100%;
      opacity: 1;
    }
    
    .section-highlight {
      animation: section-glow 1.5s ease-out;
      position: relative;
      z-index: 1;
    }
    
    @keyframes section-glow {
      0% { box-shadow: 0 0 0 rgba(0, 242, 254, 0); }
      20% { box-shadow: 0 0 20px rgba(0, 242, 254, 0.4); }
      60% { box-shadow: 0 0 30px rgba(0, 242, 254, 0.6); }
      100% { box-shadow: 0 0 0 rgba(0, 242, 254, 0); }
    }
    
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px; /* Account for fixed header */
    }
    
    /* Smooth transition for all elements */
    * {
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-3d:hover {
      transform: rotateY(10deg) rotateX(5deg) scale(1.05);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 15px rgba(0, 242, 254, 0.4);
    }
    
    .card-3d .card-content {
      transition: transform 0.3s ease;
    }
    
    .card-3d:hover .card-content {
      transform: translateZ(20px);
    }
    
    /* Buttons */
    .glow-button {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--darker);
      font-weight: 600;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .glow-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.7);
    }
    
    .glow-button:active {
      transform: scale(0.98);
    }
    
    .glow-button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: rotate(45deg);
      transition: all 0.3s ease;
      opacity: 0;
    }
    
    .glow-button:hover::after {
      opacity: 1;
      animation: shine 1.5s ease-out;
    }
    
    /* Animations */
    @keyframes gridMove {
      0% { background-position: 0 0; }
      100% { background-position: 50px 50px; }
    }
    
    /* Floating icons animation */
    .floating-icon-1 {
      animation: float1 6s ease-in-out infinite;
    }
    
    .floating-icon-2 {
      animation: float2 7s ease-in-out infinite;
    }
    
    .floating-icon-3 {
      animation: float3 8s ease-in-out infinite;
    }
    
    @keyframes float1 {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes float2 {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(15px) rotate(-5deg); }
    }
    
    @keyframes float3 {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(8deg); }
    }
    
    /* Cosmic title with enhanced styling */
    .cosmic-title {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: -1px;
      line-height: 1.1;
    }
    
    .text-gradient {
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      display: inline-block;
    }
    
    /* Enhanced card hover effects */
    .category-card {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .category-card:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 15px rgba(0, 242, 254, 0.4);
    }
    
    /* Number counter animation */
    .counter-value {
      display: inline-block;
      opacity: 0;
      animation: countUp 2s ease-out forwards;
      animation-play-state: paused;
    }
    
    @keyframes countUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { text-shadow: 0 0 5px rgba(0, 255, 255, 0.5); box-shadow: 0 0 30px rgba(0, 242, 254, 0.3); }
      50% { text-shadow: 0 0 20px rgba(0, 255, 255, 1); box-shadow: 0 0 60px rgba(0, 242, 254, 0.6); }
      100% { text-shadow: 0 0 5px rgba(0, 255, 255, 0.5); box-shadow: 0 0 30px rgba(0, 242, 254, 0.3); }
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
    
    @keyframes shine {
      0% { left: -100%; opacity: 0; }
      20% { opacity: 1; }
      100% { left: 100%; opacity: 0; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(10px); }
    }
    
    @keyframes progressBar {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    
    .animate-fadeIn {
      animation: fadeIn 0.5s ease forwards;
    }
    
    .animate-fadeOut {
      animation: fadeOut 0.5s ease forwards;
    }
    
    .animate-progressBar {
      animation: progressBar 2.5s ease-in-out forwards;
    }
    
    @keyframes rotate {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .header-text {
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: pulse 2s infinite;
    }
    
    .download-btn {
      background: linear-gradient(45deg, #00f2fe, #4facfe);
      transition: all 0.3s ease;
    }
    
    .download-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.7);
    }
    
    /* Chatbot Styles */
    .chatbot-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      width: 320px;
      max-height: 480px;
      transition: all 0.3s ease;
      cursor: move;
      touch-action: none; /* Prevents default touch actions like scrolling */
      user-select: none; /* Prevents text selection */
      -webkit-user-select: none;
    }
    
    /* Dragging styles */
    .dragging {
      opacity: 0.8;
      box-shadow: 0 0 30px rgba(0, 242, 254, 0.8);
      transition: none; /* Disable transitions while dragging for better performance */
      will-change: left, top; /* Hint for browser to optimize these properties */
    }
    
    @keyframes pulsate {
      0% {
        transform: scale(1);
        box-shadow: 0 0 10px rgba(0, 242, 254, 0.5), 0 0 20px rgba(0, 242, 254, 0.3);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(0, 242, 254, 0.8), 0 0 30px rgba(0, 242, 254, 0.5);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 10px rgba(0, 242, 254, 0.5), 0 0 20px rgba(0, 242, 254, 0.3);
      }
    }
    
    .chatbot-button {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--darker);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.7), 0 0 30px rgba(0, 242, 254, 0.4);
      transition: all 0.3s ease;
      z-index: 1001;
      animation: pulsate 2s infinite ease-in-out;
      overflow: visible;
      position: relative;
      pointer-events: auto; /* Ensure clicks are detected */
    }
    
    /* Cute robot face in button */
    .chatbot-face {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .chatbot-eyes {
      display: flex;
      justify-content: space-around;
      width: 60%;
      margin-bottom: 5px;
    }
    
    .chatbot-eye {
      width: 10px;
      height: 10px;
      background-color: var(--darker);
      border-radius: 50%;
      position: relative;
      animation: blink 4s infinite;
    }
    
    @keyframes blink {
      0%, 96%, 98% { transform: scaleY(1); }
      97% { transform: scaleY(0.1); }
    }
    
    .chatbot-mouth {
      width: 20px;
      height: 6px;
      background-color: var(--darker);
      border-radius: 10px;
      transition: all 0.3s ease;
    }
    
    .chatbot-button:hover .chatbot-mouth {
      height: 10px;
      border-radius: 5px 5px 10px 10px;
    }
    
    .chatbot-button-text {
      position: absolute;
      top: -30px;
      background: rgba(0, 242, 254, 0.2);
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      white-space: nowrap;
      color: white;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(0, 242, 254, 0.5);
      opacity: 0.9;
      animation: fadeInUp 0.5s ease, pulsate 2s infinite ease-in-out;
    }
    
    .chatbot-button:hover, .chatbot-orb-button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 25px rgba(0, 242, 254, 0.9), 0 0 40px rgba(0, 242, 254, 0.6);
      animation-play-state: paused;
    }
    
    .chatbot-orb-button {
      background: radial-gradient(circle at 30% 30%, #00f2fe, #0a0a23);
      box-shadow: 0 0 50px rgba(0, 242, 254, 0.8), 0 0 100px rgba(0, 242, 254, 0.4);
      animation: pulsateGlow 8s infinite ease-in-out;
      z-index: 40;
      cursor: grab;
      touch-action: none;
      user-select: none;
    }
    
    .chatbot-orb-button:active {
      cursor: grabbing;
    }
    
    @keyframes pulsateGlow {
      0% {
        box-shadow: 0 0 30px 5px rgba(0, 242, 254, 0.3);
        background: radial-gradient(circle at 30% 30%, rgba(0, 242, 254, 0.5), #0a0a23);
      }
      25% {
        box-shadow: 0 0 70px 15px rgba(0, 242, 254, 0.9), 0 0 100px rgba(0, 242, 254, 0.4);
        background: radial-gradient(circle at 30% 30%, rgba(0, 242, 254, 1), #0a0a23);
      }
      50% {
        box-shadow: 0 0 30px 5px rgba(0, 242, 254, 0.3);
        background: radial-gradient(circle at 30% 30%, rgba(0, 242, 254, 0.5), #0a0a23);
      }
      75% {
        box-shadow: 0 0 10px 2px rgba(0, 242, 254, 0.1);
        background: radial-gradient(circle at 30% 30%, rgba(0, 242, 254, 0.3), #0a0a23);
      }
      100% {
        box-shadow: 0 0 30px 5px rgba(0, 242, 254, 0.3);
        background: radial-gradient(circle at 30% 30%, rgba(0, 242, 254, 0.5), #0a0a23);
      }
    }
    
    .chatbot-message {
      max-width: 85%;
      margin-bottom: 10px;
    }
    
    .chatbot-message.bot {
      align-self: flex-start;
    }
    
    .chatbot-message.user {
      align-self: flex-end;
      margin-left: auto;
    }
    
    .chatbot-message .message-content {
      padding: 12px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .chatbot-message.bot .message-content {
      background-color: rgba(30, 41, 59, 0.8);
      border-bottom-left-radius: 4px;
    }
    
    .chatbot-message.user .message-content {
      background: linear-gradient(to right, #0ea5e9, #2563eb);
      color: #000;
      border-bottom-right-radius: 4px;
    }
    
    .chatbot-quick-reply {
      background-color: rgba(0, 0, 0, 0.3);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
      transition: all 0.2s ease;
      text-align: left;
      display: flex;
      align-items: center;
    }
    
    .chatbot-quick-reply:hover {
      background-color: rgba(0, 0, 0, 0.5);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    /* Typing indicator */
    .typing-indicator .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.6);
      animation: typingBounce 1.4s infinite ease-in-out both;
    }
    
    .typing-indicator .dot:nth-child(1) {
      animation-delay: -0.32s;
    }
    
    .typing-indicator .dot:nth-child(2) {
      animation-delay: -0.16s;
    }
    
    @keyframes typingBounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
    
    @keyframes popBubble {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
        opacity: 0.9;
      }
      75% {
        transform: scale(0.98);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .chatbot-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 350px;
      height: 450px;
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transform-origin: bottom right;
      transform: scale(0);
      opacity: 0;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 20px rgba(0, 242, 254, 0.5);
    }
    
    .chatbot-window.active {
      animation: popBubble 0.5s forwards ease-out;
    }
    
    /* Chat bubble pointer */
    .chatbot-window:after {
      content: '';
      position: absolute;
      bottom: -10px;
      right: 25px;
      width: 20px;
      height: 20px;
      background: rgba(26, 26, 58, 0.9);
      transform: rotate(45deg);
      border-radius: 3px;
    }
    
    .chatbot-header {
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color: var(--darker);
      padding: 10px 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 10px 10px 0 0;
      font-weight: bold;
      position: relative;
      overflow: hidden;
      cursor: move;
      touch-action: none; /* Prevents default touch actions */
      user-select: none; /* Prevents text selection */
      -webkit-user-select: none;
    }
    
    .chatbot-header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
      animation: rainbow-border 3s linear infinite;
    }
    
    @keyframes rainbow-border {
      0% { background-position: 0% 0%; }
      100% { background-position: 200% 0%; }
    }
    
    .chatbot-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .chatbot-emoji-btn {
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
      padding: 0;
      transition: transform 0.3s ease;
      position: relative;
    }
    
    .chatbot-emoji-btn:hover {
      transform: scale(1.2);
    }
    
    .emoji-pop {
      animation: emoji-pop 0.3s ease;
    }
    
    @keyframes emoji-pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.4); }
      100% { transform: scale(1); }
    }
    
    .chatbot-close {
      cursor: pointer;
      font-size: 20px;
      transition: transform 0.3s ease;
    }
    
    .chatbot-close:hover {
      transform: rotate(90deg);
    }
    
    .chatbot-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      background: rgba(10, 10, 35, 0.95);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .chatbot-message {
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 15px;
      margin-bottom: 5px;
      animation: fadeInUp 0.3s ease;
      word-break: break-word;
    }
    
    /* Typing indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 15px;
      height: 35px;
    }
    
    .typing-indicator span {
      height: 8px;
      width: 8px;
      margin: 0 2px;
      background-color: rgba(0, 242, 254, 0.7);
      display: block;
      border-radius: 50%;
      opacity: 0.4;
    }
    
    .typing-indicator span:nth-of-type(1) {
      animation: typing 1s infinite 0.1s;
    }
    
    .typing-indicator span:nth-of-type(2) {
      animation: typing 1s infinite 0.2s;
    }
    
    .typing-indicator span:nth-of-type(3) {
      animation: typing 1s infinite 0.3s;
    }
    
    @keyframes typing {
      0% {
        transform: translateY(0px);
        opacity: 0.4;
      }
      50% {
        transform: translateY(-7px);
        opacity: 0.9;
      }
      100% {
        transform: translateY(0px);
        opacity: 0.4;
      }
    }
    
    .chatbot-message.bot {
      align-self: flex-start;
      background: rgba(26, 26, 58, 0.7);
      border-bottom-left-radius: 5px;
      color: white;
      position: relative;
    }
    
    .chatbot-message.bot::before {
      content: '';
      position: absolute;
      left: -30px;
      top: 50%;
      transform: translateY(-50%);
      width: 25px;
      height: 25px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300f2fe"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4-8c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4zm-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
      opacity: 0.7;
    }
    
    .chatbot-message.user {
      align-self: flex-end;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--darker);
      border-bottom-right-radius: 5px;
    }
    
    .chatbot-input-container {
      display: flex;
      padding: 10px;
      background: rgba(26, 26, 58, 0.9);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .chatbot-input {
      flex: 1;
      padding: 10px 15px;
      border: none;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .chatbot-input:focus {
      background: rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 10px rgba(0, 242, 254, 0.3);
    }
    
    .chatbot-send {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--darker);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-left: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .chatbot-send:hover {
      transform: scale(1.1);
    }
    
    .chatbot-product {
      background: rgba(26, 26, 58, 0.5);
      border-radius: 10px;
      padding: 12px;
      margin-top: 12px;
      border-left: 3px solid var(--primary);
      animation: fadeInUp 0.4s ease;
      transition: all 0.3s ease;
    }
    
    .chatbot-product:hover {
      background: rgba(26, 26, 58, 0.7);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .chatbot-product-image {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      margin-right: 10px;
      object-fit: cover;
    }
    
    .chatbot-product-title {
      font-weight: bold;
      margin-bottom: 5px;
      color: var(--primary);
    }
    
    .chatbot-download-link {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 12px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: var(--darker);
      border-radius: 5px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }
    
    .chatbot-download-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 242, 254, 0.4);
    }
    
    @keyframes pulse-download {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 242, 254, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(0, 242, 254, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(0, 242, 254, 0);
      }
    }
    
    .chatbot-download-link:active {
      transform: translateY(1px);
      animation: pulse-download 0.5s;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .central-sphere {
        width: 100px;
        height: 100px;
      }
      
      .chatbot-container {
        width: 300px;
      }
      
      .chatbot-window {
        width: 300px;
        height: 400px;
      }
    }
  </style>
</head>
<body>
  <div class="grid-bg"></div>
  <div class="space-scene">
    <div class="central-sphere"></div>
    <div class="orbital-ring" style="width: 300px; height: 300px;"></div>
    <div class="orbital-ring" style="width: 400px; height: 400px;"></div>
    <div class="orbital-ring" style="width: 500px; height: 500px;"></div>
  </div>
  <div id="root"></div>
  
  <!-- React components will be rendered here -->

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.12.16/dist/framer-motion.js"></script>

  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Initialize chatbot functionality (outside of React)
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize counter animations on scroll
      const initCounterAnimations = () => {
        const counterElements = document.querySelectorAll('.counter-value');
        
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.animationPlayState = 'running';
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.2 });
        
        counterElements.forEach(counter => {
          observer.observe(counter);
        });
      };
      
      // Initialize animations when React has rendered
      setTimeout(() => {
        initCounterAnimations();
      }, 1000);
      
      // Add draggable functionality
      const makeDraggable = (element) => {
        const container = document.getElementById('chatbotContainer');
        const header = document.getElementById('chatbotHeader');
        
        let isDragging = false;
        let offsetX, offsetY;
        
        const startDrag = (e) => {
          // Allow dragging from anywhere in the container
          isDragging = true;
          container.classList.add('dragging');
          
          // Calculate the offset from the pointer to the container's top-left corner
          const rect = container.getBoundingClientRect();
          // Handle both mouse and touch events
          const clientX = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 0);
          const clientY = e.clientY || (e.touches && e.touches[0] ? e.touches[0].clientY : 0);
          
          offsetX = clientX - rect.left;
          offsetY = clientY - rect.top;
          
          // Prevent text selection during drag
          document.body.style.userSelect = 'none';
          
          // Prevent default behavior for touch events to avoid scrolling
          if (e.type === 'touchstart') {
            e.preventDefault();
          }
        };
        
        const drag = (e) => {
          if (!isDragging) return;
          
          // Calculate new position - handle both mouse and touch events
          const clientX = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 0);
          const clientY = e.clientY || (e.touches && e.touches[0] ? e.touches[0].clientY : 0);
          
          const x = clientX - offsetX;
          const y = clientY - offsetY;
          
          // Keep the chatbot within viewport bounds
          const viewportWidth = window.innerWidth;
          const viewportHeight = window.innerHeight;
          const chatbotWidth = container.offsetWidth;
          const chatbotHeight = container.offsetHeight;
          
          // Calculate bounds to keep at least 20% of the chatbot visible
          const minX = -chatbotWidth * 0.8;
          const maxX = viewportWidth - chatbotWidth * 0.2;
          const minY = 0; // Don't allow going above the top of the screen
          const maxY = viewportHeight - chatbotHeight * 0.2;
          
          // Apply bounded position
          const boundedX = Math.min(Math.max(x, minX), maxX);
          const boundedY = Math.min(Math.max(y, minY), maxY);
          
          // Apply new position
          container.style.left = `${boundedX}px`;
          container.style.top = `${boundedY}px`;
          container.style.right = 'auto';
          container.style.bottom = 'auto';
          
          // Prevent default behavior for touch events to avoid scrolling
          if (e.type === 'touchmove') {
            e.preventDefault();
          }
        };
        
        const endDrag = () => {
          if (!isDragging) return;
          
          isDragging = false;
          container.classList.remove('dragging');
          document.body.style.userSelect = '';
          
          // Save position to localStorage
          const rect = container.getBoundingClientRect();
          localStorage.setItem('chatbotPosition', JSON.stringify({
            left: rect.left,
            top: rect.top
          }));
        };
        
        // Restore position from localStorage if available
        const savedPosition = localStorage.getItem('chatbotPosition');
        if (savedPosition) {
          try {
            const { left, top } = JSON.parse(savedPosition);
            container.style.left = `${left}px`;
            container.style.top = `${top}px`;
            container.style.right = 'auto';
            container.style.bottom = 'auto';
          } catch (e) {
            console.error('Error restoring chatbot position:', e);
          }
        }
        
        // Add event listeners to the entire container
        container.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', endDrag);
        
        // Touch events for mobile
        container.addEventListener('touchstart', startDrag, { passive: false });
        document.addEventListener('touchmove', drag, { passive: false });
        document.addEventListener('touchend', endDrag);
        document.addEventListener('touchcancel', endDrag);
      };
      
      // Add emoji picker functionality
      const setupEmojiPicker = () => {
        const emojiButton = document.getElementById('chatbotEmoji');
        const emojis = ['ðŸ˜Š', 'ðŸ‘', 'â¤ï¸', 'ðŸŽ‰', 'ðŸ”¥', 'âœ¨', 'ðŸŒŸ', 'ðŸ’¯', 'ðŸ™', 'ðŸ¤–'];
        let currentEmojiIndex = 0;
        
        emojiButton.addEventListener('click', () => {
          // Cycle through emojis
          currentEmojiIndex = (currentEmojiIndex + 1) % emojis.length;
          emojiButton.textContent = emojis[currentEmojiIndex];
          
          // Add emoji to input
          const input = document.getElementById('chatbotInput');
          input.value += emojis[currentEmojiIndex];
          input.focus();
          
          // Animate button
          emojiButton.classList.add('emoji-pop');
          setTimeout(() => emojiButton.classList.remove('emoji-pop'), 300);
        });
      };
      // Clear URL parameters after processing to prevent duplicate purchases on refresh
      const pageUrlParams = new URLSearchParams(window.location.search);
      const hasSessionId = pageUrlParams.has('session_id');
      const hasDownload = pageUrlParams.has('download');
      
      if (hasSessionId && hasDownload) {
        // Store the session ID for later use but clean the URL
        const pageSessionId = pageUrlParams.get('session_id');
        setTimeout(() => {
          // Replace the URL without the query parameters to prevent duplicates on refresh
          const cleanUrl = window.location.pathname;
          window.history.replaceState({}, document.title, cleanUrl);
        }, 2000); // Short delay to ensure all processes have time to read the parameters
      }
      const chatbotButton = document.getElementById('chatbotButton');
      const chatbotWindow = document.getElementById('chatbotWindow');
      const chatbotClose = document.getElementById('chatbotClose');
      const chatbotMessages = document.getElementById('chatbotMessages');
      const chatbotInput = document.getElementById('chatbotInput');
      const chatbotSend = document.getElementById('chatbotSend');
      
      // Initialize draggable functionality
      makeDraggable(document.getElementById('chatbotContainer'));
      
      // Initialize emoji picker
      setupEmojiPicker();
      
      let sessionId = null;
      
      // Get session ID from URL if available
      sessionId = pageUrlParams.get('session_id');
      
      // Auto-open chatbot if coming from a successful purchase
      if (sessionId && pageUrlParams.get('download') === 'true') {
        setTimeout(() => {
          chatbotWindow.classList.add('active');
          sendBotMessage("I see you've just completed a purchase! Let me fetch your downloads for you...");
          
          // Automatically fetch purchase info
          setTimeout(() => {
            sendChatbotMessage('show my downloads');
          }, 1000);
        }, 1500);
      }
      
      // First-time explanation of chatbot purpose
      let hasExplainedPurpose = localStorage.getItem('chatbotPurposeExplained');
      let firstOpen = true;
      
      // Toggle chatbot window with improved click handling
      chatbotButton.addEventListener('click', (e) => {
        // Prevent the click from being interpreted as the start of a drag
        e.stopPropagation();
        e.preventDefault();
        chatbotWindow.classList.toggle('active');
        
        // Show purpose explanation on first open
        if (firstOpen && !hasExplainedPurpose) {
          setTimeout(() => {
            sendBotMessage("Welcome to GlowCart Assistant! I'm here to help you with your purchases and provide easy access to your downloads. If you've made a purchase, I can show you all your PDF downloads. Just ask me to 'show my downloads' or 'help me find my files'.");
            localStorage.setItem('chatbotPurposeExplained', 'true');
            firstOpen = false;
          }, 500);
        }
      });
      
      // Close chatbot window
      chatbotClose.addEventListener('click', () => {
        chatbotWindow.classList.remove('active');
      });
      
      // Send message on Enter key
      chatbotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendUserMessage();
        }
      });
      
      // Send message on button click
      chatbotSend.addEventListener('click', sendUserMessage);
      
      function sendUserMessage() {
        const message = chatbotInput.value.trim();
        if (message) {
          // Add user message to chat
          const userMessageElement = document.createElement('div');
          userMessageElement.classList.add('chatbot-message', 'user');
          userMessageElement.textContent = message;
          chatbotMessages.appendChild(userMessageElement);
          
          // Clear input
          chatbotInput.value = '';
          
          // Scroll to bottom
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
          
          // Process message
          sendChatbotMessage(message);
        }
      }
      
      function sendBotMessage(text, html = null) {
        // Check for duplicate messages to prevent duplicates
        const existingMessages = Array.from(chatbotMessages.querySelectorAll('.chatbot-message.bot'));
        const lastMessage = existingMessages[existingMessages.length - 1];
        
        // If this is a duplicate of the last message, don't add it
        if (lastMessage && lastMessage.textContent === text) {
          return;
        }
        
        const botMessageElement = document.createElement('div');
        botMessageElement.classList.add('chatbot-message', 'bot');
        
        if (html) {
          botMessageElement.innerHTML = text + html;
        } else {
          botMessageElement.textContent = text;
        }
        
        chatbotMessages.appendChild(botMessageElement);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
      }
      
      function sendChatbotMessage(message) {
        // If no session ID, inform user
        if (!sessionId) {
          sendBotMessage("I don't see any active session. If you've made a purchase, please refresh the page or check your email for download links.");
          return;
        }
        
        // Show typing indicator
        const typingIndicator = document.createElement('div');
        typingIndicator.classList.add('chatbot-message', 'bot', 'typing-indicator');
        typingIndicator.innerHTML = '<span></span><span></span><span></span>';
        chatbotMessages.appendChild(typingIndicator);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        
        // Send message to server
        fetch('/api/chatbot/message', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ sessionId, message }),
        })
        .then(response => response.json())
        .then(data => {
          // Remove typing indicator
          chatbotMessages.removeChild(typingIndicator);
          
          if (data.error) {
            sendBotMessage("Sorry, I encountered an error: " + data.error);
          } else {
            sendBotMessage(data.message, data.html);
          }
        })
        .catch(error => {
          // Remove typing indicator
          chatbotMessages.removeChild(typingIndicator);
          
          console.error('Error:', error);
          sendBotMessage("Sorry, I encountered an error while processing your request.");
        });
      }
    });

    const products = [
      { 
        id: 1, 
        title: "ðŸ”¥ King Kong Vector Graphic Design (Digital Download)", 
        price: 9.99, 
        category: "Design", 
        rating: 4.7,
        reviews: 28,
        description: "Unleash the raw power of the mighty Kong in this meticulously crafted vector artwork. Every detail captures the iconic beast's fierce presence, from the intense expression to the dynamic pose. ðŸ¦ Perfect for: T-shirts, posters, banners, social media, and brand projects. âœ¨ What's included: Layered vector files, high-res PNG/JPEG exports, and color variations. ðŸ“¥ Instant digital download, ready for both print and digital use.",
        image: "kingkong.jpg", 
        fileUrl: "downloads/kingkong.pdf",
        featured: true,
        tags: ["design", "template", "futuristic"],
        mediaType: "image"
      },
      { 
        id: 2, 
        title: "ðŸŽµ Sounds Beyond the Stars (Digital Download)", 
        price: 4.99, 
        category: "Audio", 
        rating: 4.3,
        reviews: 15,
        description: "Journey through the cosmic soundscape where stellar winds whisper ancient secrets and nebulae hum their celestial lullabies. Each track captures the raw energy of newborn stars and the gentle pulse of distant galaxies. ðŸŽ§ Perfect for: Meditation, sci-fi projects, ambient backgrounds, and cosmic inspiration. ðŸ“¥ Instant download includes: High-quality MP3s + bonus space ambience track.",
        image: "https://images.unsplash.com/photo-1614149162883-504ce4d13909?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", 
        fileUrl: "downloads/alien-roar.mp3",
        featured: false,
        tags: ["audio", "music", "cyberpunk"],
        mediaType: "audio",
        previewUrl: "alien-roar.mp3"
      },
      { 
        id: 3, 
        title: "âœ¨ Nebula Aura Template (Digital Download)", 
        price: 14.99, 
        category: "Design", 
        rating: 4.9,
        reviews: 42,
        description: "Transform your website into a gateway to the cosmos with this mesmerizing space-themed template. Features a stunning nebula-inspired design with smooth gradient effects and a clean, modern layout. ðŸŒŒ Includes: Homepage template, custom space-themed icons, and nebula background assets. ðŸ“¥ Instant download with setup guide.",
        image: "nebu.jpg", 
        fileUrl: "downloads/nebu.pdf",
        featured: true,
        tags: ["web", "template", "space"],
        mediaType: "image"
      },
      { 
        id: 4, 
        title: "ðŸŒ The First Woman, with Infinite Shades (Digital Download)", 
        price: 19.99, 
        category: "Art", 
        rating: 4.5,
        reviews: 36,
        description: "She Who Holds the Colors: A Portrait of Eve, Mother of Humanity,A powerful and symbolic digital portrait of Eve the first woman, the origin, the bearer of life and light.   ðŸ–¼ï¸ Perfect for: Wall art, prints, posters, spiritual decor, storytelling visuals and many more ðŸ“¥ Instant digital download no physical item shipped.",
        image: "eve.jpg", 
        fileUrl: "downloads/eve.pdf",
        featured: false,
        tags: ["art", "digital", "collection"],
        mediaType: "image"
      },
      { 
        id: 5, 
        title: "âš¡ Holographic Anime UI Kit (Digital Download)", 
        price: 24.99, 
        category: "Design", 
        rating: 4.8,
        reviews: 52,
        description: "A sleek collection of holographic-style UI elements with a modern anime twist. Features clean, iridescent components that add a touch of futuristic flair to any interface. ðŸŽ¨ Includes: Navigation menus, buttons, cards, and form elements with subtle rainbow effects. Perfect for: Modern websites, app interfaces, and digital projects. ðŸ“¥ Instant download includes all source files.",
        image: "holo.jpg", 
        fileUrl: "downloads/holo.pdf",
        featured: false,
        tags: ["ui", "design", "holographic"],
        mediaType: "image"
      },
      { 
        id: 6, 
        title: "   Fractal Citadel (Digital Download)", 
        price: 29.99, 
        category: "3D", 
        rating: 4.6,
        reviews: 19,
        description: "Nestled within an endless void, the Fractal Citadel rises as a testament to the beauty of mathematical precision and otherworldly design, The citadel stands as a silent guardian of an unknown realm, inviting the viewer to lose themselves in its hypnotic depths, where chaos and order dance in perfect harmony. âœ… Usage: Personal and commercial use allowed, ðŸ“¥ Instant digital download â€“ no physical item shipped.",
        image: "3d.jpg", 
        fileUrl: "downloads/3d.pdf",
        featured: false,
        tags: ["3d", "space", "models"],
        mediaType: "image"
      },
      { 
        id: 7, 
        title: "ðŸŽ¬ Cosmic Particles (Digital Download)", 
        price: 12.99, 
        category: "Video", 
        rating: 4.8,
        reviews: 33,
        description: "Elevate your projects with this mesmerizing cosmic particles video background. Perfect for websites, presentations, and video productions. The slow-moving particles create a sense of depth and wonder against the deep space backdrop. ðŸŽ¥ Features: 4K resolution, 30 seconds loop, multiple color variations included. ðŸ“¥ Instant download in MP4 format.",
        image: "https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", 
        fileUrl: "downloads/cosmic-particles.mp4",
        featured: false,
        tags: ["video", "background", "space"],
        mediaType: "video",
        videoUrl: "https://assets.mixkit.co/videos/preview/mixkit-stars-in-space-1610-large.mp4"
      },
      { 
        id: 8, 
        title: "âœ¨ Neon Glow UI Animation Pack (Digital Download)", 
        price: 19.99, 
        category: "GIF", 
        rating: 4.7,
        reviews: 24,
        description: "Add futuristic flair to your interfaces with this collection of neon-styled UI animations. Each animation is designed to capture attention while maintaining a sleek, modern aesthetic. ðŸŽ¨ Perfect for: Web interfaces, mobile apps, and digital presentations. ðŸ“¥ Instant download includes GIF and JSON formats for Lottie animations.",
        image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80", 
        fileUrl: "downloads/neon-animations.zip",
        featured: false,
        tags: ["gif", "ui", "neon"],
        mediaType: "gif",
        gifUrl: "https://media4.giphy.com/media/3o7ZeTmU77UlPyeR2w/giphy.gif"
      }
    ];

    // Navigation component
    const Navigation = ({ cart, setIsCartOpen, isCartOpen, currentUser, onOpenAuthModal, onSignOut }) => {
      // Enhanced smooth scrolling function with subtle animation
      const smoothScrollTo = (elementId) => {
        const element = document.getElementById(elementId);
        if (!element) return;
        
        // Highlight the section briefly with a glow effect
        const addGlowEffect = () => {
          element.classList.add('section-highlight');
          setTimeout(() => {
            element.classList.remove('section-highlight');
          }, 1500);
        };
        
        // Calculate offset to account for fixed header
        const headerOffset = 80;
        const elementPosition = element.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        
        // Smooth scroll with custom easing
        window.scrollTo({
          top: offsetPosition,
          behavior: 'smooth'
        });
        
        // Add glow effect after scrolling completes
        setTimeout(addGlowEffect, 600);
      };
      
      // Scroll to cart section when cart icon is clicked
      const handleCartClick = () => {
        setIsCartOpen(!isCartOpen);
        smoothScrollTo('cart');
      };
      
      // Handle navigation link clicks
      const handleNavClick = (e, targetId) => {
        e.preventDefault();
        if (targetId === 'home') {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
          smoothScrollTo(targetId);
        }
      };
      
      return (
        <nav className="glass fixed top-0 left-0 right-0 z-50 px-6 py-4 flex justify-between items-center">
          <div className="flex items-center">
            <h1 className="text-2xl font-bold header-text cursor-pointer" onClick={(e) => handleNavClick(e, 'home')}>Glow<span className="text-cyan-400">Cart</span></h1>
          </div>
          <div className="hidden md:flex space-x-6">
            <a href="#" className="text-white hover:text-cyan-400 transition duration-300 relative nav-link" onClick={(e) => handleNavClick(e, 'home')}>Home</a>
            <a href="#products" className="text-white hover:text-cyan-400 transition duration-300 relative nav-link" onClick={(e) => handleNavClick(e, 'products')}>Products</a>
            <a href="#cart" className="text-white hover:text-cyan-400 transition duration-300 relative nav-link" onClick={(e) => handleNavClick(e, 'cart')}>Cart</a>
            {currentUser && (
              <a href="#purchases" className="text-white hover:text-cyan-400 transition duration-300 relative nav-link" onClick={(e) => handleNavClick(e, 'purchases')}>Purchases</a>
            )}
          </div>
          <div className="flex items-center space-x-4">
            <button 
              className="relative group" 
              onClick={handleCartClick}
              aria-label="Shopping Cart"
            >
              <i className="fas fa-shopping-cart text-white text-xl group-hover:text-cyan-400 transition-colors duration-300"></i>
              <span className="absolute -top-2 -right-2 bg-cyan-500 text-xs text-black font-bold rounded-full w-5 h-5 flex items-center justify-center transition-all duration-300 group-hover:bg-cyan-400 group-hover:scale-110">{cart.length}</span>
              {cart.length > 0 && (
                <span className="absolute -bottom-8 right-0 bg-cyan-900/80 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">View cart ({cart.length} items)</span>
              )}
            </button>
            
            {currentUser ? (
              <UserProfile user={currentUser} onSignOut={onSignOut} />
            ) : (
              <button 
                onClick={() => onOpenAuthModal('signin')}
                className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded-md hover:from-cyan-400 hover:to-blue-400 transition duration-300 neon-glow"
              >
                Sign In
              </button>
            )}
          </div>
        </nav>
      );
    };

    // Header/Hero component with enhanced visuals
    const Hero = () => {
      return (
        <div className="relative min-h-screen flex items-center justify-center px-4 py-20 mt-16 overflow-hidden">
          
          <div className="text-center z-10 max-w-5xl mx-auto">
            {/* Premium badge */}
            <div className="inline-block mb-4 px-4 py-1 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm border border-purple-500/30">
              <span className="text-sm font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 animate-pulse">
                <i className="fas fa-gem mr-2"></i>Premium Digital Assets
              </span>
            </div>
            
            <h1 className="text-5xl md:text-7xl font-bold mb-6 cosmic-title">
              Digital <span className="text-gradient animate-pulse">Universe</span> Marketplace
            </h1>
            
            <p className="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
              Discover premium digital assets with futuristic design and cosmic themes for your next creative project.
            </p>
            
            <div className="flex flex-col sm:flex-row gap-4 justify-center mb-10">
              <button className="glow-button px-8 py-3 text-lg font-bold rounded-md group overflow-hidden relative">
                <span className="relative z-10">Explore Products</span>
                <div className="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
              <button className="bg-transparent border border-cyan-500 text-cyan-400 px-8 py-3 text-lg font-bold rounded-md hover:bg-cyan-500/10 transition duration-300 group">
                <span>Learn More</span>
                <i className="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform"></i>
              </button>
            </div>
            
            {/* Key benefits */}
            <div className="flex flex-wrap justify-center gap-4 mb-12">
              <div className="flex items-center space-x-2 px-4 py-2 rounded-full bg-gray-800/50 backdrop-blur-sm">
                <i className="fas fa-shield-alt text-cyan-400"></i>
                <span className="text-sm font-medium">Secure Payments</span>
              </div>
              <div className="flex items-center space-x-2 px-4 py-2 rounded-full bg-gray-800/50 backdrop-blur-sm">
                <i className="fas fa-bolt text-cyan-400"></i>
                <span className="text-sm font-medium">Instant Downloads</span>
              </div>
              <div className="flex items-center space-x-2 px-4 py-2 rounded-full bg-gray-800/50 backdrop-blur-sm">
                <i className="fas fa-headset text-cyan-400"></i>
                <span className="text-sm font-medium">24/7 Support</span>
              </div>
            </div>
            
            {/* How It Works - Compact */}
            <div className="mt-24 mb-16 max-w-4xl mx-auto">
              <h3 className="text-xl font-bold cosmic-title mb-6 text-center">How It <span className="text-gradient">Works</span></h3>
              
              <div className="flex flex-wrap justify-center gap-3 relative">
                {/* Step 1 */}
                <div className="glass rounded-lg p-3 flex items-center space-x-2 transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20">
                  <div className="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center relative flex-shrink-0">
                    <span className="text-white font-bold text-xs">1</span>
                  </div>
                  <div className="flex flex-col">
                    <h4 className="text-sm font-bold">Browse</h4>
                    <p className="text-gray-400 text-xs">Find digital assets</p>
                  </div>
                </div>
                
                <div className="text-cyan-400 flex items-center px-1">
                  <i className="fas fa-chevron-right text-sm"></i>
                </div>
                
                {/* Step 2 */}
                <div className="glass rounded-lg p-3 flex items-center space-x-2 transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20">
                  <div className="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center relative flex-shrink-0">
                    <span className="text-white font-bold text-xs">2</span>
                  </div>
                  <div className="flex flex-col">
                    <h4 className="text-sm font-bold">Add to Cart</h4>
                    <p className="text-gray-400 text-xs">Select your items</p>
                  </div>
                </div>
                
                <div className="text-cyan-400 flex items-center px-1">
                  <i className="fas fa-chevron-right text-sm"></i>
                </div>
                
                {/* Step 3 */}
                <div className="glass rounded-lg p-3 flex items-center space-x-2 transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20">
                  <div className="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center relative flex-shrink-0">
                    <span className="text-white font-bold text-xs">3</span>
                  </div>
                  <div className="flex flex-col">
                    <h4 className="text-sm font-bold">Checkout</h4>
                    <p className="text-gray-400 text-xs">Secure payment</p>
                  </div>
                </div>
                
                <div className="text-cyan-400 flex items-center px-1">
                  <i className="fas fa-chevron-right text-sm"></i>
                </div>
                
                {/* Step 4 */}
                <div className="glass rounded-lg p-3 flex items-center space-x-2 transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20">
                  <div className="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center relative flex-shrink-0">
                    <span className="text-white font-bold text-xs">4</span>
                  </div>
                  <div className="flex flex-col">
                    <h4 className="text-sm font-bold">Download</h4>
                    <p className="text-gray-400 text-xs">Instant access</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Featured Categories component
    const FeaturedCategories = () => {
      const categories = [
        { id: 1, name: 'Graphics', icon: 'fa-image', color: 'from-purple-500 to-pink-500', count: 24 },
        { id: 2, name: 'Code', icon: 'fa-code', color: 'from-cyan-500 to-blue-500', count: 18 },
        { id: 3, name: 'Audio', icon: 'fa-music', color: 'from-green-500 to-teal-500', count: 12 },
        { id: 4, name: 'Video', icon: 'fa-video', color: 'from-red-500 to-orange-500', count: 9 },
        { id: 5, name: '3D Models', icon: 'fa-cube', color: 'from-yellow-500 to-amber-500', count: 15 },
        { id: 6, name: 'Templates', icon: 'fa-layer-group', color: 'from-indigo-500 to-purple-500', count: 21 }
      ];
      
      return (
        <div className="py-24 px-6 max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold cosmic-title mb-6">Browse <span className="text-gradient">Categories</span></h2>
            <p className="text-xl text-gray-300 max-w-3xl mx-auto">Explore our vast collection of digital assets across multiple categories</p>
          </div>
          
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            {categories.map(category => (
              <div key={category.id} className="category-card glass rounded-xl overflow-hidden relative group">
                <div className={`absolute inset-0 bg-gradient-to-br ${category.color} opacity-10 group-hover:opacity-20 transition-opacity duration-500`}></div>
                <div className="p-8">
                  <div className={`w-16 h-16 rounded-lg bg-gradient-to-br ${category.color} flex items-center justify-center mb-6 transform group-hover:scale-110 transition-transform duration-500`}>
                    <i className={`fas ${category.icon} text-2xl text-white`}></i>
                  </div>
                  
                  <h3 className="text-2xl font-bold mb-2">{category.name}</h3>
                  <p className="text-gray-400 mb-6">{category.count} products</p>
                  
                  <a href="#products" className="inline-flex items-center text-cyan-400 group-hover:text-cyan-300 transition-colors duration-300">
                    Browse Category
                    <i className="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i>
                  </a>
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    };
    
    // Testimonials component
    const Testimonials = () => {
      const testimonials = [
        {
          id: 1,
          name: 'Alex Johnson',
          role: 'UI Designer',
          avatar: 'https://randomuser.me/api/portraits/men/32.jpg',
          rating: 5,
          text: 'The quality of digital assets on GlowCart is exceptional. I use them in all my client projects now!'
        },
        {
          id: 2,
          name: 'Sarah Williams',
          role: 'Web Developer',
          avatar: 'https://randomuser.me/api/portraits/women/44.jpg',
          rating: 5,
          text: 'As a developer, I appreciate the clean code templates. They save me hours of work on every project.'
        },
        {
          id: 3,
          name: 'Michael Chen',
          role: 'Game Designer',
          avatar: 'https://randomuser.me/api/portraits/men/64.jpg',
          rating: 4,
          text: 'The 3D models are perfect for my indie game development. Great quality at reasonable prices.'
        },
        {
          id: 4,
          name: 'Emily Rodriguez',
          role: 'Digital Artist',
          avatar: 'https://randomuser.me/api/portraits/women/28.jpg',
          rating: 5,
          text: 'The vector graphics are incredibly detailed and easy to customize. Perfect for my illustration work!'
        },
        {
          id: 5,
          name: 'David Kim',
          role: 'Startup Founder',
          avatar: 'https://randomuser.me/api/portraits/men/22.jpg',
          rating: 5,
          text: 'GlowCart saved our startup thousands in design costs. The UI kits are professional and modern.'
        },
        {
          id: 6,
          name: 'Olivia Taylor',
          role: 'Music Producer',
          avatar: 'https://randomuser.me/api/portraits/women/17.jpg',
          rating: 5,
          text: 'The audio samples are top-notch quality. I use them in all my productions and my clients love the results.'
        },
        {
          id: 7,
          name: 'James Wilson',
          role: 'YouTuber',
          avatar: 'https://randomuser.me/api/portraits/men/52.jpg',
          rating: 4,
          text: 'The video templates have elevated my channel content. Easy to customize and render quickly.'
        },
        {
          id: 8,
          name: 'Sophia Martinez',
          role: 'Marketing Specialist',
          avatar: 'https://randomuser.me/api/portraits/women/63.jpg',
          rating: 5,
          text: 'The social media templates are perfect for our campaigns. Consistent quality and great designs.'
        }
      ];
      
      return (
        <div className="py-20 px-6 max-w-7xl mx-auto">
          <div className="text-center mb-12">
            <h2 className="text-4xl font-bold cosmic-title mb-6">What Our <span className="text-gradient">Customers</span> Say</h2>
            <p className="text-xl text-gray-300 max-w-3xl mx-auto">Join thousands of satisfied creators who trust our digital marketplace</p>
          </div>
          
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {testimonials.map(testimonial => (
              <div key={testimonial.id} className="glass rounded-xl p-5 transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20 flex flex-col h-full">
                <div className="flex items-center mb-3">
                  <img src={testimonial.avatar} alt={testimonial.name} className="w-10 h-10 rounded-full mr-3 ring-2 ring-cyan-400" />
                  <div>
                    <h4 className="font-bold text-sm">{testimonial.name}</h4>
                    <p className="text-gray-400 text-xs">{testimonial.role}</p>
                  </div>
                </div>
                
                <div className="flex text-yellow-400 mb-2">
                  {[...Array(5)].map((_, i) => (
                    <i key={i} className={`fas ${i < testimonial.rating ? 'fa-star' : 'fa-star text-gray-600'} mr-1 text-xs`}></i>
                  ))}
                </div>
                
                <p className="text-gray-300 text-sm flex-grow">"{testimonial.text}"</p>
              </div>
            ))}
          </div>
        </div>
      );
    };
    
    // Newsletter component
    const Newsletter = () => {
      return (
        <div className="py-24 px-6 max-w-7xl mx-auto">
          <div className="glass rounded-xl overflow-hidden relative">
            <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500"></div>
            <div className="p-10 md:p-16 relative">
              <div className="absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 rounded-full filter blur-3xl"></div>
              <div className="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full filter blur-3xl"></div>
              
              <div className="relative z-10 text-center max-w-3xl mx-auto">
                <h2 className="text-4xl font-bold cosmic-title mb-6">Stay in the <span className="text-gradient">Cosmic Loop</span></h2>
                <p className="text-xl text-gray-300 mb-10">
                  Subscribe to our newsletter and be the first to know about new digital assets, exclusive deals, and cosmic updates.
                </p>
                
                <form className="flex flex-col sm:flex-row gap-4 mb-6">
                  <input 
                    type="email" 
                    placeholder="Enter your email address" 
                    className="flex-1 bg-gray-900/50 border border-gray-700 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300"
                  />
                  <button 
                    type="submit" 
                    className="glow-button px-8 py-3 text-lg font-bold rounded-md group overflow-hidden relative"
                  >
                    <span className="relative z-10">Subscribe</span>
                    <div className="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                  </button>
                </form>
                
                <p className="text-gray-400 text-sm">
                  Join <span className="text-cyan-400 font-bold">5,000+</span> other creators. No spam, unsubscribe anytime.
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    };
    
    // How It Works component
    const HowItWorks = () => {
      const steps = [
        {
          id: 1,
          title: 'Browse Products',
          description: 'Explore our vast collection of premium digital assets across multiple categories.',
          icon: 'fa-search'
        },
        {
          id: 2,
          title: 'Add to Cart',
          description: 'Select the items you need and add them to your shopping cart.',
          icon: 'fa-shopping-cart'
        },
        {
          id: 3,
          title: 'Secure Checkout',
          description: 'Complete your purchase with our secure payment system.',
          icon: 'fa-credit-card'
        },
        {
          id: 4,
          title: 'Instant Download',
          description: 'Get immediate access to your purchased digital assets.',
          icon: 'fa-download'
        }
      ];
      
      return (
        <div className="py-24 px-6 max-w-7xl mx-auto">
          <div className="text-center mb-16">
            <h2 className="text-4xl font-bold cosmic-title mb-6">How It <span className="text-gradient">Works</span></h2>
            <p className="text-xl text-gray-300 max-w-3xl mx-auto">Get started with GlowCart in just a few simple steps</p>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 relative">
            {/* Connecting line */}
            <div className="absolute top-1/4 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-blue-500 hidden lg:block"></div>
            
            {steps.map((step, index) => (
              <div key={step.id} className="relative z-10">
                <div className="glass rounded-xl p-8 text-center transform transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/20 h-full flex flex-col items-center">
                  <div className="w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center mb-6 relative">
                    <span className="absolute -top-2 -right-2 w-6 h-6 rounded-full bg-cyan-400 text-black font-bold text-sm flex items-center justify-center">{step.id}</span>
                    <i className={`fas ${step.icon} text-2xl text-white`}></i>
                  </div>
                  
                  <h3 className="text-2xl font-bold mb-4">{step.title}</h3>
                  <p className="text-gray-300">{step.description}</p>
                  
                  {index < steps.length - 1 && (
                    <div className="absolute -right-4 top-1/4 transform translate-y-1/2 text-cyan-400 text-2xl hidden lg:block">
                      <i className="fas fa-chevron-right"></i>
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    };
    
    // Stats component with animation
    const Stats = () => {
      return (
        <div className="py-20 px-6 max-w-7xl mx-auto">
          <div className="glass rounded-xl overflow-hidden">
            <div className="p-10 relative">
              <div className="absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-blue-500/10"></div>
              <div className="relative z-10">
                <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                  <div className="p-4">
                    <div className="text-4xl font-bold text-cyan-400 mb-2 counter-value">500+</div>
                    <p className="text-gray-300">Digital Products</p>
                  </div>
                  <div className="p-4">
                    <div className="text-4xl font-bold text-cyan-400 mb-2 counter-value">10k+</div>
                    <p className="text-gray-300">Happy Customers</p>
                  </div>
                  <div className="p-4">
                    <div className="text-4xl font-bold text-cyan-400 mb-2 counter-value">25k+</div>
                    <p className="text-gray-300">Downloads</p>
                  </div>
                  <div className="p-4">
                    <div className="text-4xl font-bold text-cyan-400 mb-2 counter-value">4.9</div>
                    <p className="text-gray-300">Average Rating</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };
    
    // Authentication components
    const AuthModal = ({ isOpen, onClose, activeTab, setActiveTab }) => {
      const [username, setUsername] = useState('');
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [confirmPassword, setConfirmPassword] = useState('');
      const [error, setError] = useState('');
      const [success, setSuccess] = useState('');
      const [forgotPassword, setForgotPassword] = useState(false);
      
      // Form validation
      const validateForm = () => {
        setError('');
        
        if (forgotPassword) {
          if (!email) {
            setError('Please enter your email address');
            return false;
          }
          
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            setError('Please enter a valid email address');
            return false;
          }
          
          return true;
        }
        
        if (!username || !password) {
          setError('Please fill in all fields');
          return false;
        }
        
        if (username.length < 3) {
          setError('Username must be at least 3 characters');
          return false;
        }
        
        if (password.length < 6) {
          setError('Password must be at least 6 characters');
          return false;
        }
        
        if (activeTab === 'signup') {
          if (password !== confirmPassword) {
            setError('Passwords do not match');
            return false;
          }
          
          if (!email) {
            setError('Please enter your email address');
            return false;
          }
          
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            setError('Please enter a valid email address');
            return false;
          }
        }
        
        return true;
      };
      
      // Handle sign in
      const handleSignIn = (e) => {
        e.preventDefault();
        if (!validateForm()) return;
        
        // Check if user exists in localStorage
        const users = JSON.parse(localStorage.getItem('glowcart_users') || '[]');
        const user = users.find(u => u.username === username && u.password === password);
        
        if (!user) {
          setError('Invalid username or password');
          return;
        }
        
        // Check if this is a new user for welcome message
        const isNewUser = user.isNewUser;
        
        // Update user to no longer be considered new
        if (isNewUser) {
          const updatedUsers = users.map(u => {
            if (u.username === username) {
              return { ...u, isNewUser: false };
            }
            return u;
          });
          localStorage.setItem('glowcart_users', JSON.stringify(updatedUsers));
        }
        
        // Set user in localStorage
        localStorage.setItem('glowcart_current_user', JSON.stringify({
          username: user.username,
          email: user.email,
          timestamp: new Date().getTime(),
          showWelcome: isNewUser
        }));
        
        setSuccess('Sign in successful!');
        
        // Clear form and close modal after a delay
        setTimeout(() => {
          setUsername('');
          setPassword('');
          setError('');
          setSuccess('');
          onClose();
          window.location.reload(); // Refresh to update UI
        }, 1000);
      };
      
      // Handle sign up
      const handleSignUp = (e) => {
        e.preventDefault();
        if (!validateForm()) return;
        
        // Check if username already exists
        const users = JSON.parse(localStorage.getItem('glowcart_users') || '[]');
        if (users.some(u => u.username === username)) {
          setError('Username already exists');
          return;
        }
        
        // Check if email already exists
        if (users.some(u => u.email === email)) {
          setError('Email already exists');
          return;
        }
        
        // Add new user
        const newUser = {
          username,
          email,
          password,
          createdAt: new Date().getTime(),
          isNewUser: true
        };
        
        users.push(newUser);
        
        localStorage.setItem('glowcart_users', JSON.stringify(users));
        
        // Set success message
        setSuccess('Account created successfully! Logging you in...');
        
        // Automatically log in the new user
        setTimeout(() => {
          // Store user in localStorage with showWelcome flag
          localStorage.setItem('glowcart_current_user', JSON.stringify({
            username: username,
            email: email,
            timestamp: new Date().getTime(),
            showWelcome: true
          }));
          
          // Clear form and close modal
          setUsername('');
          setEmail('');
          setPassword('');
          setConfirmPassword('');
          setError('');
          setSuccess('');
          onClose();
          window.location.reload(); // Refresh to update UI and trigger welcome message
        }, 1500);
      };
      
      // Handle forgot password
      const handleForgotPassword = (e) => {
        e.preventDefault();
        if (!validateForm()) return;
        
        // Check if email exists in localStorage
        const users = JSON.parse(localStorage.getItem('glowcart_users') || '[]');
        const user = users.find(u => u.email === email);
        
        if (!user) {
          setError('No account found with this email address');
          return;
        }
        
        // Show the user's password directly
        setSuccess(`Your password is: ${user.password}`);
        
        // Clear form and switch back to sign in after a delay
        setTimeout(() => {
          setEmail('');
          setError('');
          setSuccess('');
          setForgotPassword(false);
        }, 5000); // Increased delay to give more time to read the password
      };
      
      if (!isOpen) return null;
      
      return (
        <div className="fixed inset-0 flex items-center justify-center z-50">
          <div className="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm" onClick={onClose}></div>
          <div className="glass relative rounded-xl overflow-hidden w-full max-w-md p-6 shadow-2xl shadow-cyan-500/20 animate-fadeIn">
            <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500"></div>
            
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-2xl font-bold header-text">
                {forgotPassword ? 'Reset Password' : activeTab === 'signin' ? 'Sign In' : 'Create Account'}
              </h2>
              <button 
                onClick={onClose}
                className="text-gray-400 hover:text-white transition-colors"
                aria-label="Close"
              >
                <i className="fas fa-times"></i>
              </button>
            </div>
            
            {!forgotPassword && (
              <div className="flex mb-6">
                <button 
                  className={`flex-1 py-2 text-center transition-colors ${activeTab === 'signin' ? 'text-cyan-400 border-b-2 border-cyan-400' : 'text-gray-400 hover:text-gray-300'}`}
                  onClick={() => setActiveTab('signin')}
                >
                  Sign In
                </button>
                <button 
                  className={`flex-1 py-2 text-center transition-colors ${activeTab === 'signup' ? 'text-cyan-400 border-b-2 border-cyan-400' : 'text-gray-400 hover:text-gray-300'}`}
                  onClick={() => setActiveTab('signup')}
                >
                  Sign Up
                </button>
              </div>
            )}
            
            {error && (
              <div className="bg-red-500/20 border border-red-500/50 text-white px-4 py-2 rounded mb-4 animate-fadeIn">
                <i className="fas fa-exclamation-circle mr-2"></i>
                {error}
              </div>
            )}
            
            {success && (
              <div className="bg-green-500/20 border border-green-500/50 text-white px-4 py-2 rounded mb-4 animate-fadeIn">
                <i className="fas fa-check-circle mr-2"></i>
                {success}
              </div>
            )}
            
            {forgotPassword ? (
              <form onSubmit={handleForgotPassword}>
                <div className="mb-4">
                  <label className="block text-gray-300 mb-2" htmlFor="email">Email Address</label>
                  <input 
                    type="email" 
                    id="email" 
                    className="w-full bg-gray-800/50 border border-gray-700 rounded px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    placeholder="Enter your email address"
                    required
                  />
                </div>
                
                <button 
                  type="submit"
                  className="w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-black font-bold py-2 px-4 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 mt-2"
                >
                  Reset Password
                </button>
                
                <p className="text-center mt-4 text-gray-400 text-sm">
                  Remember your password? <button type="button" onClick={() => setForgotPassword(false)} className="text-cyan-400 hover:underline">Back to Sign In</button>
                </p>
              </form>
            ) : (
              <form onSubmit={activeTab === 'signin' ? handleSignIn : handleSignUp}>
                <div className="mb-4">
                  <label className="block text-gray-300 mb-2" htmlFor="username">Username</label>
                  <input 
                    type="text" 
                    id="username" 
                    className="w-full bg-gray-800/50 border border-gray-700 rounded px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    value={username}
                    onChange={(e) => setUsername(e.target.value)}
                    placeholder="Enter your username"
                    required
                  />
                </div>
                
                {activeTab === 'signup' && (
                  <div className="mb-4">
                    <label className="block text-gray-300 mb-2" htmlFor="email">Email Address</label>
                    <input 
                      type="email" 
                      id="email" 
                      className="w-full bg-gray-800/50 border border-gray-700 rounded px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      placeholder="Enter your email address"
                      required
                    />
                  </div>
                )}
                
                <div className="mb-4">
                  <label className="block text-gray-300 mb-2" htmlFor="password">Password</label>
                  <input 
                    type="password" 
                    id="password" 
                    className="w-full bg-gray-800/50 border border-gray-700 rounded px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    placeholder="Enter your password"
                    required
                  />
                </div>
                
                {activeTab === 'signup' && (
                  <div className="mb-4">
                    <label className="block text-gray-300 mb-2" htmlFor="confirmPassword">Confirm Password</label>
                    <input 
                      type="password" 
                      id="confirmPassword" 
                      className="w-full bg-gray-800/50 border border-gray-700 rounded px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                      value={confirmPassword}
                      onChange={(e) => setConfirmPassword(e.target.value)}
                      placeholder="Confirm your password"
                      required
                    />
                  </div>
                )}
              
                <button 
                  type="submit"
                  className="w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-black font-bold py-2 px-4 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 mt-2"
                >
                  {activeTab === 'signin' ? 'Sign In' : 'Create Account'}
                </button>
              </form>
            )}
            
            {!forgotPassword && activeTab === 'signin' && (
              <div>
                <p className="text-center mt-4 text-gray-400 text-sm">
                  Don't have an account? <button onClick={() => setActiveTab('signup')} className="text-cyan-400 hover:underline">Sign up</button>
                </p>
                <p className="text-center mt-2 text-gray-400 text-sm">
                  <button onClick={() => setForgotPassword(true)} className="text-cyan-400 hover:underline">Forgot password?</button>
                </p>
              </div>
            )}
            
            {!forgotPassword && activeTab === 'signup' && (
              <p className="text-center mt-4 text-gray-400 text-sm">
                Already have an account? <button onClick={() => setActiveTab('signin')} className="text-cyan-400 hover:underline">Sign in</button>
              </p>
            )}
          </div>
        </div>
      );
    };
    
    // User Profile component
    const UserProfile = ({ user, onSignOut }) => {
      return (
        <div className="relative group">
          <button className="flex items-center space-x-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-full px-4 py-2 transition-colors">
            <div className="w-8 h-8 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full flex items-center justify-center text-black font-bold">
              {user.username.charAt(0).toUpperCase()}
            </div>
            <span className="text-white">{user.username}</span>
            <i className="fas fa-chevron-down text-gray-400 group-hover:text-white transition-colors"></i>
          </button>
          
          <div className="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg overflow-hidden z-10 scale-0 group-hover:scale-100 origin-top-right transition-transform duration-200 ease-out">
            <div className="py-1">
              <a href="#purchases" className="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors">
                <i className="fas fa-download mr-2"></i> My Purchases
              </a>
              <a href="#" className="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors">
                <i className="fas fa-user-circle mr-2"></i> Profile
              </a>
              <button 
                onClick={onSignOut}
                className="w-full text-left block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors"
              >
                <i className="fas fa-sign-out-alt mr-2"></i> Sign Out
              </button>
            </div>
          </div>
        </div>
      );
    };
    
    function App() {
      const [cart, setCart] = useState([]);
      const [purchasedItems, setPurchasedItems] = useState([]);
      const [activeCategory, setActiveCategory] = useState('All');
      const [searchTerm, setSearchTerm] = useState('');
      const [previewProduct, setPreviewProduct] = useState(null);
      const [isCartOpen, setIsCartOpen] = useState(false);
      const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);
      const [activeAuthTab, setActiveAuthTab] = useState('signin');
      const [currentUser, setCurrentUser] = useState(null);

      const stripe = Stripe('pk_test_YourPublicKey'); // Replace with your Stripe public key
      const [showChatbot, setShowChatbot] = useState(false);
      
      // Chatbot toggle and functions
      const handleChatbotQuickReply = (type) => {
        const chatbotMessages = document.getElementById('chatbotMessages');
        
        // Add user selection as a message
        const userMessage = document.createElement('div');
        userMessage.className = 'chatbot-message user';
        
        let userText = '';
        switch(type) {
          case 'downloads':
            userText = 'I want to see my downloads';
            break;
          case 'support':
            userText = 'I need support';
            break;
          case 'about':
            userText = 'Tell me about Glow Cart';
            break;
          default:
            userText = type;
        }
        
        userMessage.innerHTML = `
          <div class="message-content">
            <p>${userText}</p>
          </div>
        `;
        chatbotMessages.appendChild(userMessage);
        
        // Scroll to bottom
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        
        // Show typing indicator
        const typingIndicator = document.createElement('div');
        typingIndicator.className = 'chatbot-message bot typing-indicator';
        typingIndicator.innerHTML = `
          <div class="message-content">
            <div class="flex gap-1">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </div>
        `;
        chatbotMessages.appendChild(typingIndicator);
        
        // Process response after delay
        setTimeout(() => {
          // Remove typing indicator
          chatbotMessages.removeChild(typingIndicator);
          
          // Add bot response based on type
          const botMessage = document.createElement('div');
          botMessage.className = 'chatbot-message bot';
          
          switch(type) {
            case 'downloads':
              if (purchasedItems.length > 0) {
                botMessage.innerHTML = `
                  <div class="message-content">
                    <p>Here are your downloads:</p>
                    <div class="mt-3 space-y-3">
                      ${purchasedItems.map(product => `
                        <div class="bg-black bg-opacity-30 p-3 rounded-lg">
                          <div class="flex items-center gap-2 mb-2">
                            <img src="${product.image}" alt="${product.title}" class="w-10 h-10 object-cover rounded">
                            <p class="font-bold">${product.title}</p>
                          </div>
                          <a href="${product.fileUrl}" download class="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded flex items-center justify-center gap-2 w-full">
                            <i class="fas fa-download"></i>
                            <span>Download Now</span>
                          </a>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                `;
              } else {
                botMessage.innerHTML = `
                  <div class="message-content">
                    <p>You don't have any downloads yet. Browse our products and make a purchase to see them here!</p>
                    <button class="chatbot-quick-reply mt-3" onclick="scrollToSection('products')">
                      <i class="fas fa-shopping-bag mr-2"></i> Browse Products
                    </button>
                  </div>
                `;
              }
              break;
              
            case 'support':
              botMessage.innerHTML = `
                <div class="message-content">
                  <p>Our support team is ready to help! You can reach us at:</p>
                  <div class="mt-3">
                    <button class="chatbot-quick-reply" onclick="document.getElementById('supportModal').classList.remove('hidden')">
                      <i class="fas fa-envelope mr-2"></i> Contact Support
                    </button>
                  </div>
                </div>
              `;
              break;
              
            case 'about':
              botMessage.innerHTML = `
                <div class="message-content">
                  <p>Glow Cart is your one-stop shop for premium digital products. We offer:</p>
                  <ul class="list-disc pl-5 mt-2 space-y-1">
                    <li>High-quality digital assets</li>
                    <li>Instant downloads</li>
                    <li>Secure payment processing</li>
                    <li>24/7 customer support</li>
                  </ul>
                  <div class="mt-3">
                    <button class="chatbot-quick-reply" onclick="scrollToSection('how-it-works')">
                      <i class="fas fa-info-circle mr-2"></i> How It Works
                    </button>
                  </div>
                </div>
              `;
              break;
              
            default:
              botMessage.innerHTML = `
                <div class="message-content">
                  <p>I'm not sure how to help with that. Would you like to try one of these options?</p>
                  <div class="flex flex-col gap-2 mt-3">
                    <button class="chatbot-quick-reply" onclick="handleChatbotQuickReply('downloads')">
                      <i class="fas fa-download mr-2"></i> My Downloads
                    </button>
                    <button class="chatbot-quick-reply" onclick="handleChatbotQuickReply('support')">
                      <i class="fas fa-headset mr-2"></i> Contact Support
                    </button>
                  </div>
                </div>
              `;
          }
          
          chatbotMessages.appendChild(botMessage);
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }, 1000);
      };
      
      // Function to handle sending a message in the chatbot
      const handleChatbotSend = () => {
        const input = document.getElementById('chatbotInput');
        const message = input.value.trim();
        
        if (message) {
          // Add user message
          const chatbotMessages = document.getElementById('chatbotMessages');
          const userMessage = document.createElement('div');
          userMessage.className = 'chatbot-message user';
          userMessage.innerHTML = `
            <div class="message-content">
              <p>${message}</p>
            </div>
          `;
          chatbotMessages.appendChild(userMessage);
          
          // Clear input
          input.value = '';
          
          // Scroll to bottom
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
          
          // Process message and determine intent
          let intent = 'unknown';
          const lowerMessage = message.toLowerCase();
          
          if (lowerMessage.includes('download') || lowerMessage.includes('purchase') || lowerMessage.includes('bought')) {
            intent = 'downloads';
          } else if (lowerMessage.includes('help') || lowerMessage.includes('support') || lowerMessage.includes('contact') || lowerMessage.includes('email')) {
            intent = 'support';
          } else if (lowerMessage.includes('about') || lowerMessage.includes('what is') || lowerMessage.includes('who are')) {
            intent = 'about';
          }
          
          // Handle the intent after a short delay
          setTimeout(() => {
            handleChatbotQuickReply(intent);
          }, 500);
        }
      };
      
      // Function to scroll to a section
      const scrollToSection = (sectionId) => {
        const section = document.getElementById(sectionId);
        if (section) {
          section.scrollIntoView({ behavior: 'smooth' });
        }
      };
      
      // Chatbot dragging functionality
      const handleChatbotDragStart = (e) => {
        e.preventDefault();
        const chatbotButton = document.getElementById('draggableChatbot');
        
        // Get initial position
        const initialX = e.clientX || (e.touches && e.touches[0].clientX);
        const initialY = e.clientY || (e.touches && e.touches[0].clientY);
        
        // Get initial button position
        const rect = chatbotButton.getBoundingClientRect();
        const buttonX = rect.left;
        const buttonY = rect.top;
        
        // Setup move and end event handlers
        const handleMove = (moveEvent) => {
          const currentX = moveEvent.clientX || (moveEvent.touches && moveEvent.touches[0].clientX);
          const currentY = moveEvent.clientY || (moveEvent.touches && moveEvent.touches[0].clientY);
          
          const deltaX = currentX - initialX;
          const deltaY = currentY - initialY;
          
          // Update position
          chatbotButton.style.left = `${buttonX + deltaX}px`;
          chatbotButton.style.top = `${buttonY + deltaY}px`;
          chatbotButton.style.bottom = 'auto';
          chatbotButton.style.right = 'auto';
        };
        
        const handleEnd = () => {
          // Remove event listeners
          document.removeEventListener('mousemove', handleMove);
          document.removeEventListener('mouseup', handleEnd);
          document.removeEventListener('touchmove', handleMove);
          document.removeEventListener('touchend', handleEnd);
        };
        
        // Add event listeners
        document.addEventListener('mousemove', handleMove);
        document.addEventListener('mouseup', handleEnd);
        document.addEventListener('touchmove', handleMove);
        document.addEventListener('touchend', handleEnd);
      };
      
      // Check if user is logged in on component mount and load purchases
      useEffect(() => {
        const userJson = localStorage.getItem('glowcart_current_user');
        if (userJson) {
          const userData = JSON.parse(userJson);
          // Check if login is still valid (24 hours)
          const now = new Date().getTime();
          const loginTime = userData.timestamp;
          const hoursElapsed = (now - loginTime) / (1000 * 60 * 60);
          
          if (hoursElapsed < 24) {
            setCurrentUser(userData);
            
            // Load user's purchases from localStorage
            const userPurchases = localStorage.getItem(`glowcart_purchases_${userData.username}`);
            if (userPurchases) {
              setPurchasedItems(JSON.parse(userPurchases));
            }
            
            // Check if we should show the welcome message
            if (userData.showWelcome) {
              // Show welcome modal with slight delay for better UX
              setTimeout(() => {
                const welcomeModal = document.getElementById('welcomeModal');
                if (welcomeModal) {
                  welcomeModal.classList.remove('hidden');
                }
              }, 1000);
              
              // Update user data to not show welcome again
              const updatedUserData = { ...userData, showWelcome: false };
              localStorage.setItem('glowcart_current_user', JSON.stringify(updatedUserData));
            }
          } else {
            // Login expired, remove from localStorage
            localStorage.removeItem('glowcart_current_user');
          }
        }
      }, []);
      
      // Handle sign out
      const handleSignOut = () => {
        localStorage.removeItem('glowcart_current_user');
        setCurrentUser(null);
        setPurchasedItems([]);
      };

      // AI Security Monitor - Detects and prevents suspicious activities
      const aiSecurityMonitor = {
        // Security token for session validation
        securityToken: null,
        
        // Initialize security monitoring
        init: function() {
          // Generate unique security token for this session
          this.securityToken = this.generateSecurityToken();
          localStorage.setItem('glowcart_security_token', this.securityToken);
          
          // Set up event listeners for security monitoring
          this.monitorUserActivity();
          
          // Perform initial security check
          this.runSecurityCheck();
          
          // Schedule regular security checks
          setInterval(() => this.runSecurityCheck(), 60000); // Check every minute
          
          console.log('AI Security Monitor initialized');
          return this;
        },
        
        // Generate a secure token
        generateSecurityToken: function() {
          return 'sc_' + Math.random().toString(36).substring(2, 15) + 
                 Math.random().toString(36).substring(2, 15) + 
                 '_' + new Date().getTime();
        },
        
        // Validate security token
        validateToken: function() {
          const storedToken = localStorage.getItem('glowcart_security_token');
          return storedToken === this.securityToken;
        },
        
        // Monitor for suspicious activity
        monitorUserActivity: function() {
          // Monitor for rapid form submissions (potential bot activity)
          let formSubmissionCount = 0;
          const formSubmissionThreshold = 5;
          const formSubmissionTimeWindow = 10000; // 10 seconds
          
          document.addEventListener('submit', (e) => {
            formSubmissionCount++;
            
            setTimeout(() => {
              formSubmissionCount--;
            }, formSubmissionTimeWindow);
            
            if (formSubmissionCount > formSubmissionThreshold) {
              console.warn('Suspicious form activity detected');
              this.handleSecurityThreat('Unusual form submission pattern detected');
              e.preventDefault();
            }
          });
          
          // Monitor for localStorage tampering
          const originalSetItem = localStorage.setItem;
          localStorage.setItem = function(key, value) {
            // Only monitor Glow Cart related keys
            if (key.startsWith('glowcart_')) {
              // Check if value is suspiciously large (potential XSS payload)
              if (value.length > 10000) {
                console.warn('Suspicious localStorage activity detected');
                aiSecurityMonitor.handleSecurityThreat('Suspicious data storage attempt');
                return;
              }
            }
            originalSetItem.call(localStorage, key, value);
          };
        },
        
        // Run comprehensive security check
        runSecurityCheck: function() {
          // Validate security token
          if (!this.validateToken()) {
            this.handleSecurityThreat('Invalid security token');
            return false;
          }
          
          // Check for suspicious login patterns
          this.checkLoginPatterns();
          
          // Check for XSS attempts in form inputs
          this.scanForXSS();
          
          return true;
        },
        
        // Check for suspicious login patterns
        checkLoginPatterns: function() {
          const loginAttempts = JSON.parse(localStorage.getItem('glowcart_login_attempts') || '[]');
          const recentAttempts = loginAttempts.filter(attempt => 
            (new Date().getTime() - attempt.timestamp) < 3600000 // Last hour
          );
          
          // Check for multiple failed attempts
          if (recentAttempts.length > 5) {
            const failedAttempts = recentAttempts.filter(attempt => !attempt.success);
            if (failedAttempts.length > 3) {
              this.handleSecurityThreat('Multiple failed login attempts detected');
            }
          }
        },
        
        // Scan for potential XSS attacks
        scanForXSS: function() {
          const inputs = document.querySelectorAll('input, textarea');
          inputs.forEach(input => {
            const value = input.value;
            if (value.includes('<script>') || value.includes('javascript:') || 
                value.includes('onerror=') || value.includes('onload=')) {
              this.handleSecurityThreat('Potential XSS attack detected');
              input.value = ''; // Clear suspicious input
            }
          });
        },
        
        // Handle security threats silently without showing alerts to users
        handleSecurityThreat: function(threatDescription) {
          // Just log to console for debugging, no user-visible alerts
          console.error('Security threat detected:', threatDescription);
          
          // Log the security event to localStorage for admin review
          const securityLogs = JSON.parse(localStorage.getItem('glowcart_security_logs') || '[]');
          securityLogs.push({
            timestamp: new Date().getTime(),
            threat: threatDescription,
            url: window.location.href,
            userAgent: navigator.userAgent
          });
          localStorage.setItem('glowcart_security_logs', JSON.stringify(securityLogs));
          
          // Reset security token silently
          this.securityToken = this.generateSecurityToken();
          localStorage.setItem('glowcart_security_token', this.securityToken);
          
          // Take silent protective actions based on threat type
          // This keeps the security without alarming users
        }
      };
      
      // Initialize AI security monitoring
      const securityAI = aiSecurityMonitor.init();
      
      const initiateCheckout = (product) => {
        // Run security check silently before proceeding
        if (!securityAI.runSecurityCheck()) {
          console.warn('Security check failed during checkout');
          // Instead of showing an error, we'll still proceed with checkout
          // but log the issue silently for monitoring
        }
        
        // Show brief processing overlay
        const processingOverlay = document.createElement('div');
        processingOverlay.className = 'fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50';
        processingOverlay.innerHTML = `
          <div class="glass p-8 rounded-xl max-w-md text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-cyan-500 mx-auto mb-6"></div>
            <h2 class="text-2xl font-bold header-text mb-4">Redirecting to Checkout</h2>
            <p class="text-gray-300 mb-2">Please wait while we connect to Stripe...</p>
          </div>
        `;
        document.body.appendChild(processingOverlay);
        
        // Store the product(s) being purchased in localStorage for retrieval after payment
        if (Array.isArray(product)) {
          // Multiple products (cart checkout)
          localStorage.setItem('glowcart_pending_purchase', JSON.stringify({
            products: product,
            timestamp: new Date().getTime(),
            isCartPurchase: true,
            returnUrl: window.location.href // Store return URL for Stripe to redirect back
          }));
        } else {
          // Single product checkout
          localStorage.setItem('glowcart_pending_purchase', JSON.stringify({
            product: product,
            timestamp: new Date().getTime(),
            isCartPurchase: false,
            returnUrl: window.location.href // Store return URL for Stripe to redirect back
          }));
        }
        
        // Direct redirect to the provided Stripe checkout link
        setTimeout(() => {
          window.location.href = 'https://buy.stripe.com/28oeXG5xvgle4lW9AB';
        }, 1000);
      };

      const addToCart = (product) => {
        setCart([...cart, product]);
      };

      // Check for purchased items (after payment completion)
      useEffect(() => {
        const urlParams = new URLSearchParams(window.location.search);
        // Check for Stripe success parameters or our own success parameter
        const stripeRedirect = urlParams.get('redirect_status');
        const paymentSuccess = urlParams.get('payment_success');
        
        // Check if we have a pending purchase and payment was successful
        // This handles both our old success parameter and Stripe's redirect_status=succeeded
        if (paymentSuccess === 'true' || stripeRedirect === 'succeeded') {
          const pendingPurchaseJson = localStorage.getItem('glowcart_pending_purchase');
          
          if (pendingPurchaseJson) {
            const pendingPurchase = JSON.parse(pendingPurchaseJson);
            const purchaseTimestamp = pendingPurchase.timestamp;
            const now = new Date().getTime();
            
            // Only process if the purchase is recent (within last 5 minutes)
            if (now - purchaseTimestamp < 5 * 60 * 1000) {
              // Process purchased items
              let purchasedProducts = [];
              
              if (pendingPurchase.isCartPurchase) {
                // Multiple products purchased
                setPurchasedItems(prevItems => {
                  // Filter out any duplicates by ID
                  const existingIds = prevItems.map(item => item.id);
                  const newItems = pendingPurchase.products.filter(product => !existingIds.includes(product.id));
                  const newItemsWithDate = newItems.map(product => ({
                    ...product,
                    purchaseDate: new Date().toISOString()
                  }));
                  purchasedProducts = newItemsWithDate; // Store for chatbot
                  return [...prevItems, ...newItemsWithDate];
                });
              } else {
                // Single product purchase
                setPurchasedItems(prevItems => {
                  // Check if this product is already in the list
                  if (!prevItems.some(item => item.id === pendingPurchase.product.id)) {
                    const newProduct = {
                      ...pendingPurchase.product,
                      purchaseDate: new Date().toISOString()
                    };
                    purchasedProducts = [newProduct]; // Store for chatbot
                    return [...prevItems, newProduct];
                  }
                  return prevItems;
                });
              }
              
              // Clear the cart after successful purchase
              if (pendingPurchase.isCartPurchase) {
                setCart([]);
              }
              
              // Different behavior based on user login status
              if (currentUser) {
                // For logged-in users: Save to account and redirect to purchases section
                setTimeout(() => {
                  // We use setTimeout to ensure purchasedItems has been updated
                  const currentPurchases = JSON.parse(localStorage.getItem(`glowcart_purchases_${currentUser.username}`) || '[]');
                  let updatedPurchases = [...currentPurchases];
                  
                  if (pendingPurchase.isCartPurchase) {
                    // Add new products that aren't already in purchases
                    pendingPurchase.products.forEach(product => {
                      if (!updatedPurchases.some(item => item.id === product.id)) {
                        updatedPurchases.push({
                          ...product,
                          purchaseDate: new Date().toISOString()
                        });
                      }
                    });
                  } else if (!updatedPurchases.some(item => item.id === pendingPurchase.product.id)) {
                    // Add single product with purchase date
                    updatedPurchases.push({
                      ...pendingPurchase.product,
                      purchaseDate: new Date().toISOString()
                    });
                  }
                  
                  // Save to localStorage
                  localStorage.setItem(`glowcart_purchases_${currentUser.username}`, JSON.stringify(updatedPurchases));
                  
                  // Scroll to purchases section
                  const purchasesSection = document.getElementById('purchases');
                  if (purchasesSection) {
                    purchasesSection.scrollIntoView({ behavior: 'smooth' });
                  }
                  
                  // Show success message for signed-in users
                  const successToast = document.createElement('div');
                  successToast.className = 'fixed bottom-4 right-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-6 py-3 rounded-lg shadow-lg z-50 animate-fadeIn';
                  successToast.innerHTML = `
                    <div class="flex items-center gap-3">
                      <i class="fas fa-check-circle text-2xl"></i>
                      <div>
                        <p class="font-bold">Purchase Successful!</p>
                        <p class="text-sm">Your downloads are now available in your Purchases section.</p>
                      </div>
                    </div>
                  `;
                  document.body.appendChild(successToast);
                  
                  // Remove toast after 5 seconds
                  setTimeout(() => {
                    successToast.classList.add('animate-fadeOut');
                    setTimeout(() => document.body.removeChild(successToast), 500);
                  }, 5000);
                }, 500);
              } else {
                // For guest users: Show both chatbot with download links AND purchases portal
                setTimeout(() => {
                  // Show chatbot
                  setShowChatbot(true);
                  
                  // Initialize chatbot with welcome message and download links
                  const chatbotContainer = document.getElementById('chatbotContainer');
                  if (chatbotContainer) {
                    const chatbotMessages = document.getElementById('chatbotMessages');
                    
                    // Clear any existing messages
                    chatbotMessages.innerHTML = '';
                    
                    // Add bot welcome message
                    const welcomeMessage = document.createElement('div');
                    welcomeMessage.className = 'chatbot-message bot';
                    welcomeMessage.innerHTML = `
                      <div class="message-content">
                        <p>ðŸŽ‰ Thank you for your purchase! Your downloads are ready.</p>
                      </div>
                    `;
                    chatbotMessages.appendChild(welcomeMessage);
                    
                    // Add download links for each purchased product
                    purchasedProducts.forEach(product => {
                      const downloadMessage = document.createElement('div');
                      downloadMessage.className = 'chatbot-message bot';
                      downloadMessage.innerHTML = `
                        <div class="message-content">
                          <div class="flex items-center gap-2 mb-2">
                            <img src="${product.image}" alt="${product.title}" class="w-10 h-10 object-cover rounded">
                            <p class="font-bold">${product.title}</p>
                          </div>
                          <a href="${product.fileUrl}" download class="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded flex items-center justify-center gap-2 w-full">
                            <i class="fas fa-download"></i>
                            <span>Download Now</span>
                          </a>
                        </div>
                      `;
                      chatbotMessages.appendChild(downloadMessage);
                    });
                    
                    // Add tip message
                    const tipMessage = document.createElement('div');
                    tipMessage.className = 'chatbot-message bot';
                    tipMessage.innerHTML = `
                      <div class="message-content">
                        <p>ðŸ’¡ Tip: Create an account to save your purchases for future access!</p>
                      </div>
                    `;
                    chatbotMessages.appendChild(tipMessage);
                    
                    // Scroll to bottom of messages
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                  }
                  
                  // Create and show guest purchases portal
                  const guestPurchasesPortal = document.createElement('div');
                  guestPurchasesPortal.className = 'fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center z-50';
                  guestPurchasesPortal.id = 'guestPurchasesPortal';
                  guestPurchasesPortal.innerHTML = `
                    <div class="glass rounded-xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                      <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold header-text flex items-center">
                          <i class="fas fa-download text-cyan-400 mr-2"></i>
                          Your Purchases
                        </h2>
                        <button id="closeGuestPurchasesPortal" class="text-gray-400 hover:text-white transition-colors">
                          <i class="fas fa-times text-xl"></i>
                        </button>
                      </div>
                      
                      <div class="grid sm:grid-cols-2 gap-5">
                        ${purchasedProducts.map(product => `
                          <div class="glass rounded-lg p-4 flex justify-between items-center hover:bg-gray-800/50 transition-all duration-300">
                            <div class="flex items-center">
                              <img src="${product.image}" alt="${product.title}" class="w-14 h-14 object-cover rounded mr-3">
                              <div>
                                <h3 class="font-semibold">${product.title}</h3>
                                <p class="text-gray-400 text-sm">Purchased just now</p>
                              </div>
                            </div>
                            <a
                              href="${product.fileUrl}"
                              download
                              class="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 flex items-center gap-2 shadow-md shadow-cyan-500/20"
                            >
                              <i class="fas fa-download"></i>
                              <span>Download</span>
                            </a>
                          </div>
                        `).join('')}
                      </div>
                      
                      <div class="mt-8 border-t border-gray-700 pt-6">
                        <div class="bg-gray-800/50 rounded-lg p-4">
                          <h3 class="text-lg font-semibold mb-2 text-cyan-400">Want to save your purchases?</h3>
                          <p class="text-gray-300 mb-4">Create an account to access your purchases anytime, anywhere.</p>
                          <button 
                            id="guestSignupButton"
                            class="glow-button px-6 py-2 rounded-md w-full sm:w-auto"
                          >
                            Create Account
                          </button>
                        </div>
                      </div>
                    </div>
                  `;
                  document.body.appendChild(guestPurchasesPortal);
                  
                  // Add event listeners for the guest purchases portal
                  document.getElementById('closeGuestPurchasesPortal').addEventListener('click', () => {
                    guestPurchasesPortal.classList.add('animate-fadeOut');
                    setTimeout(() => {
                      document.body.removeChild(guestPurchasesPortal);
                    }, 300);
                  });
                  
                  // Handle signup button click
                  document.getElementById('guestSignupButton').addEventListener('click', () => {
                    // Close the portal
                    guestPurchasesPortal.classList.add('animate-fadeOut');
                    setTimeout(() => {
                      document.body.removeChild(guestPurchasesPortal);
                      // Open auth modal with signup tab
                      setIsAuthModalOpen(true);
                      setActiveAuthTab('signup');
                    }, 300);
                  });
                  
                }, 1000);
                
                // Show success toast for guest users
                const successToast = document.createElement('div');
                successToast.className = 'fixed bottom-4 right-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-6 py-3 rounded-lg shadow-lg z-50 animate-fadeIn';
                successToast.innerHTML = `
                  <div class="flex items-center gap-3">
                    <i class="fas fa-check-circle text-2xl"></i>
                    <div>
                      <p class="font-bold">Purchase Successful!</p>
                      <p class="text-sm">Your purchases are ready for download.</p>
                    </div>
                  </div>
                `;
                document.body.appendChild(successToast);
                
                // Remove toast after 5 seconds
                setTimeout(() => {
                  successToast.classList.add('animate-fadeOut');
                  setTimeout(() => document.body.removeChild(successToast), 500);
                }, 5000);
              }
            }
            
            // Clear the pending purchase
            localStorage.removeItem('glowcart_pending_purchase');
            
            // Remove the query parameter to prevent reprocessing on refresh
            window.history.replaceState({}, document.title, window.location.pathname);
          }
        }
      }, [currentUser, setShowChatbot]);
      

      // Filter products based on active category and search term
      const filteredProducts = products.filter(product => {
        const matchesCategory = activeCategory === 'All' || product.category === activeCategory;
        const matchesSearch = product.title.toLowerCase().includes(searchTerm.toLowerCase()) || 
                             product.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             product.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
        return matchesCategory && matchesSearch;
      });

      // Get all unique categories
      const categories = ['All', ...new Set(products.map(product => product.category))];

      // Featured products
      const featuredProducts = products.filter(product => product.featured);

      // Star rating component
      const ProductPreviewModal = ({ product, onClose }) => {
        if (!product) return null;
        
        return (
          <div className="fixed inset-0 flex items-center justify-center z-50" onClick={onClose}>
            <div className="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>
            <div className="glass relative rounded-xl w-full max-w-lg p-6 shadow-2xl shadow-cyan-500/20 animate-fadeIn" onClick={e => e.stopPropagation()}>
              <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500"></div>
              
              <button 
                className="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors"
                onClick={onClose}
              >
                <i className="fas fa-times"></i>
              </button>

              <div className="flex flex-col md:flex-row gap-6">
                <div className="w-full md:w-1/2">
                  {product.mediaType === 'video' ? (
                    <div className="rounded-lg overflow-hidden glass p-4">
                      <h4 className="text-cyan-400 mb-2 flex items-center gap-2">
                        <i className="fas fa-film"></i>
                        <span>Video Preview</span>
                      </h4>
                      <video 
                        src={product.videoUrl}
                        controls
                        autoPlay
                        loop
                        className="w-full h-64 object-cover rounded-lg neon-border"
                      >
                        Your browser does not support the video element.
                      </video>
                      <div className="mt-2 text-sm text-cyan-400 flex items-center justify-between">
                        <span><i className="fas fa-info-circle mr-2"></i>4K resolution available</span>
                        <span><i className="fas fa-clock mr-2"></i>30 second loop</span>
                      </div>
                    </div>
                  ) : product.mediaType === 'gif' ? (
                    <div className="rounded-lg overflow-hidden glass p-4">
                      <h4 className="text-cyan-400 mb-2 flex items-center gap-2">
                        <i className="fas fa-magic"></i>
                        <span>GIF Animation</span>
                      </h4>
                      <img 
                        src={product.gifUrl} 
                        alt={product.title}
                        className="w-full h-64 object-cover rounded-lg neon-border"
                      />
                      <div className="mt-2 text-sm text-cyan-400 flex items-center justify-between">
                        <span><i className="fas fa-palette mr-2"></i>Animated UI elements</span>
                        <span><i className="fas fa-bolt mr-2"></i>Ready to use</span>
                      </div>
                    </div>
                  ) : (
                    <img 
                      src={product.image} 
                      alt={product.title}
                      className="w-full h-64 object-cover rounded-lg"
                    />
                  )}
                  
                  {product.mediaType === 'audio' && (
                    <div className="mt-4 glass p-4 rounded-lg">
                      <h4 className="text-cyan-400 mb-2 flex items-center gap-2">
                        <i className="fas fa-headphones"></i>
                        <span>Preview Audio</span>
                      </h4>
                      <audio 
                        controls 
                        className="w-full custom-audio-player"
                        src={product.previewUrl || product.fileUrl}
                      >
                        Your browser does not support the audio element.
                      </audio>
                    </div>
                  )}
                </div>
                
                <div className="w-full md:w-1/2">
                  <h3 className="text-2xl font-bold mb-2">{product.title}</h3>
                  <p className="text-cyan-400 text-xl mb-4">${product.price.toFixed(2)}</p>
                  <div className="flex items-center gap-2 mb-4">
                    <StarRating rating={product.rating} />
                    <span className="text-gray-400">({product.reviews} reviews)</span>
                  </div>
                  <p className="text-gray-300 mb-4">{product.description}</p>
                  <div className="flex flex-wrap gap-2 mb-4">
                    {product.tags.map(tag => (
                      <span key={tag} className="px-3 py-1 rounded-full bg-gray-800 text-gray-300 text-sm">
                        #{tag}
                      </span>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const StarRating = ({ rating }) => {
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
        
        return (
          <div className="flex items-center">
            {[...Array(fullStars)].map((_, i) => (
              <i key={`full-${i}`} className="fas fa-star text-yellow-400"></i>
            ))}
            {hasHalfStar && <i className="fas fa-star-half-alt text-yellow-400"></i>}
            {[...Array(emptyStars)].map((_, i) => (
              <i key={`empty-${i}`} className="far fa-star text-yellow-400"></i>
            ))}
            <span className="ml-1 text-gray-400 text-sm">({rating})</span>
          </div>
        );
      };

      // Product card component
      const ProductCard = ({ product, onPreview }) => {
        return (
          <div className="card-3d glass rounded-lg overflow-hidden transition-all duration-300 h-full flex flex-col">
            <div className="relative overflow-hidden">
              {product.featured && (
                <div className="absolute top-0 right-0 bg-gradient-to-r from-pink-500 to-purple-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg z-10">
                  Featured
                </div>
              )}
              {product.mediaType === 'video' ? (
                <div className="relative group" onClick={() => onPreview(product)}>
                  <video 
                    src={product.videoUrl}
                    poster={product.image}
                    className="w-full h-48 object-cover cursor-pointer"
                    muted
                    loop
                    onMouseOver={(e) => e.target.play()}
                    onMouseOut={(e) => {e.target.pause(); e.target.currentTime = 0;}}
                    onClick={(e) => e.stopPropagation()}
                  />
                  <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    <div className="bg-black bg-opacity-50 rounded-full p-2">
                      <i className="fas fa-play text-white"></i>
                    </div>
                  </div>
                </div>
              ) : product.mediaType === 'gif' ? (
                <div className="relative group" onClick={() => onPreview(product)}>
                  <img 
                    src={product.image} 
                    alt={product.title}
                    className="w-full h-48 object-cover cursor-pointer group-hover:opacity-0 transition-opacity duration-300" 
                  />
                  <img 
                    src={product.gifUrl} 
                    alt={product.title}
                    className="absolute inset-0 w-full h-48 object-cover cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity duration-300" 
                  />
                  <div className="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">
                    <i className="fas fa-magic mr-1"></i> Hover for animation
                  </div>
                </div>
              ) : (
                <img 
                  src={product.image} 
                  alt={product.title} 
                  className="w-full h-48 object-cover transition-transform duration-500 hover:scale-110 cursor-pointer" 
                  onClick={() => onPreview(product)}
                />
              )}
            </div>
            <div className="p-5 flex-grow flex flex-col card-content">
              <div className="flex justify-between items-start mb-2">
                <h3 className="text-base font-semibold mb-2 line-clamp-2">{product.title}</h3>
                <span className="bg-cyan-500/20 text-cyan-400 text-xs px-2 py-1 rounded">{product.category}</span>
              </div>
              <StarRating rating={product.rating} />
              <p className="text-gray-400 text-xs mb-3 line-clamp-2">{product.description}</p>
              <div className="flex flex-wrap gap-1 mb-3">
                {product.tags.map(tag => (
                  <span key={tag} className="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded-full">{tag}</span>
                ))}
              </div>
              <p className="text-cyan-400 text-2xl font-bold mb-4">${product.price.toFixed(2)}</p>
              <div className="flex gap-2">
                <button
                  onClick={() => addToCart(product)}
                  className="flex-1 bg-cyan-500 text-black px-4 py-2 rounded hover:bg-cyan-400 transition-all duration-300 flex items-center justify-center gap-2"
                >
                  <i className="fas fa-shopping-cart"></i>
                  <span>Add to Cart</span>
                </button>
                <button
                  onClick={() => initiateCheckout(product)}
                  className="flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 flex items-center justify-center gap-2"
                >
                  <i className="fas fa-bolt"></i>
                  <span>Buy Now</span>
                </button>
              </div>
            </div>
          </div>
        );
      };

      return (
        <div className="min-h-screen">
          <ProductPreviewModal product={previewProduct} onClose={() => setPreviewProduct(null)} />
          <Navigation 
            cart={cart} 
            setIsCartOpen={setIsCartOpen} 
            isCartOpen={isCartOpen} 
            currentUser={currentUser}
            onOpenAuthModal={(tab) => {
              setActiveAuthTab(tab);
              setIsAuthModalOpen(true);
            }}
            onSignOut={handleSignOut}
          />
          <Hero />
          
          {/* Auth Modal */}
          <AuthModal 
            isOpen={isAuthModalOpen} 
            onClose={() => setIsAuthModalOpen(false)}
            activeTab={activeAuthTab}
            setActiveTab={setActiveAuthTab}
          />
          
          <div className="max-w-7xl mx-auto px-6 py-20" id="products">
            {/* Featured Products Section */}
            <div className="mb-20">
              <h2 className="text-3xl font-bold header-text mb-8 flex items-center">
                <i className="fas fa-star text-yellow-400 mr-3"></i>
                Featured Products
              </h2>
              <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                {featuredProducts.map(product => (
                  <ProductCard key={product.id} product={product} onPreview={setPreviewProduct} />
                ))}
              </div>
            </div>
            
            {/* All Products Section */}
            <h2 className="text-3xl font-bold header-text mb-8">Browse All Products</h2>
            
            {/* Search and Filter */}
            <div className="mb-8 flex flex-col md:flex-row gap-4 justify-between items-center">
              <div className="relative w-full md:w-1/3">
                <input 
                  type="text" 
                  placeholder="Search products..." 
                  className="w-full bg-gray-900/50 border border-gray-700 rounded-lg py-2 px-4 pl-10 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                />
                <i className="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              </div>
              
              <div className="flex gap-2 overflow-x-auto pb-2 w-full md:w-auto">
                {categories.map(category => (
                  <button 
                    key={category} 
                    className={`px-4 py-2 rounded-full transition-all duration-300 whitespace-nowrap ${activeCategory === category ? 'bg-cyan-500 text-black font-bold' : 'bg-gray-800 text-white hover:bg-gray-700'}`}
                    onClick={() => setActiveCategory(category)}
                  >
                    {category}
                  </button>
                ))}
              </div>
            </div>
            
            {/* Products Grid */}
            {filteredProducts.length > 0 ? (
              <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                {filteredProducts.map(product => (
                  <ProductCard key={product.id} product={product} onPreview={setPreviewProduct} />
                ))}
              </div>
            ) : (
              <div className="text-center py-20">
                <i className="fas fa-search text-5xl text-gray-600 mb-4"></i>
                <p className="text-xl text-gray-400">No products found matching your criteria</p>
                <button 
                  className="mt-4 px-4 py-2 bg-cyan-500 text-black rounded hover:bg-cyan-400 transition-all duration-300"
                  onClick={() => {
                    setActiveCategory('All');
                    setSearchTerm('');
                  }}
                >
                  Reset Filters
                </button>
              </div>
            )}
          </div>

          {/* Cart Section */}
          <div className={`mt-20 glass rounded-xl p-6 transition-all duration-500 max-w-4xl mx-auto ${isCartOpen ? 'ring-4 ring-cyan-400 shadow-lg shadow-cyan-400/30 scale-[1.01]' : ''}`} id="cart">
            <h2 className="text-3xl font-bold header-text mb-8 flex items-center">
              <i className="fas fa-shopping-cart text-cyan-400 mr-3"></i>
              Your Cart ({cart.length})
            </h2>
            
            {cart.length === 0 ? (
              <div className="text-center py-16 flex flex-col items-center">
                <div className="w-20 h-20 rounded-full bg-gray-800 flex items-center justify-center mb-4">
                  <i className="fas fa-shopping-cart text-3xl text-gray-500"></i>
                </div>
                <p className="text-xl text-gray-400 mb-4">Your cart is empty</p>
                <p className="text-gray-500 mb-6 max-w-md">Looks like you haven't added any items to your cart yet. Browse our products and find something you'll love!</p>
                <button 
                  onClick={() => document.getElementById('products').scrollIntoView({ behavior: 'smooth' })}
                  className="glow-button px-6 py-2 rounded-md"
                >
                  Browse Products
                </button>
              </div>
            ) : (
              <div>
                <div className="overflow-x-auto">
                  <table className="w-full table-auto">
                    <thead>
                      <tr className="border-b border-gray-800">
                        <th className="py-3 text-left w-3/5">Product</th>
                        <th className="py-3 text-center w-1/5">Price</th>
                        <th className="py-3 text-center w-1/5">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {cart.map((item, index) => (
                        <tr key={index} className="border-b border-gray-800 hover:bg-gray-800/50 transition-colors">
                          <td className="py-4">
                            <div className="flex items-center">
                              <img src={item.image} alt={item.title} className="w-12 h-12 object-cover rounded mr-3" />
                              <div>
                                <h3 className="font-semibold">{item.title}</h3>
                                <p className="text-gray-400 text-sm">{item.category}</p>
                              </div>
                            </div>
                          </td>
                          <td className="py-4 text-center">
                            <span className="text-cyan-400 font-bold">${item.price.toFixed(2)}</span>
                          </td>
                          <td className="py-4 text-center">
                            <div className="flex justify-center gap-2">
                              <button
                                onClick={() => initiateCheckout(item)}
                                className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-3 py-1 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300"
                              >
                                Checkout
                              </button>
                              <button
                                onClick={() => {
                                  const newCart = [...cart];
                                  newCart.splice(index, 1);
                                  setCart(newCart);
                                }}
                                className="bg-gray-700 text-white px-3 py-1 rounded hover:bg-gray-600 transition-all duration-300"
                              >
                                <i className="fas fa-trash-alt"></i>
                              </button>
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
                
                <div className="mt-6 flex flex-col md:flex-row justify-between items-center gap-4">
                  <div className="text-xl">
                    <span className="text-gray-400">Total: </span>
                    <span className="text-cyan-400 font-bold">
                      ${cart.reduce((total, item) => total + item.price, 0).toFixed(2)}
                    </span>
                  </div>
                  <button
                    onClick={() => initiateCheckout(cart)}
                    className="w-full md:w-auto bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-6 py-2 rounded-md hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 flex items-center justify-center gap-2 font-bold"
                  >
                    <i className="fas fa-credit-card"></i>
                    <span>Checkout All Items</span>
                  </button>
                </div>
              </div>
            )}
          </div>
          
          {/* Purchases Section - Appears before testimonials for logged-in users */}
          {currentUser && (
            <div className="mt-16 glass rounded-xl p-5 transition-all duration-500 max-w-4xl mx-auto" id="purchases">
              <h2 className="text-2xl font-bold header-text mb-6 flex items-center">
                <i className="fas fa-download text-cyan-400 mr-2"></i>
                Your Purchases
              </h2>
              
              {purchasedItems.length > 0 ? (
                <div className="grid sm:grid-cols-2 gap-5">
                  {purchasedItems.map((item, index) => (
                    <div key={index} className="glass rounded-lg p-4 flex justify-between items-center hover:bg-gray-800/50 transition-all duration-300">
                      <div className="flex items-center">
                        <img src={item.image} alt={item.title} className="w-14 h-14 object-cover rounded mr-3" />
                        <div>
                          <h3 className="font-semibold">{item.title}</h3>
                          <p className="text-gray-400 text-sm">Purchased on {item.purchaseDate ? new Date(item.purchaseDate).toLocaleDateString() : new Date().toLocaleDateString()}</p>
                        </div>
                      </div>
                      <a
                        href={item.fileUrl}
                        download
                        className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300 flex items-center gap-2 shadow-md shadow-cyan-500/20"
                      >
                        <i className="fas fa-download"></i>
                        <span>Download</span>
                      </a>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center py-12 flex flex-col items-center">
                  <div className="w-18 h-18 rounded-full bg-gray-800 flex items-center justify-center mb-4">
                    <i className="fas fa-box-open text-2xl text-gray-500"></i>
                  </div>
                  <p className="text-xl text-gray-400 mb-3">No purchases yet</p>
                  <p className="text-gray-500 mb-5 max-w-md">Your digital downloads will appear here after you make a purchase. Browse our products and find something amazing!</p>
                  <button 
                    onClick={() => document.getElementById('products').scrollIntoView({ behavior: 'smooth' })}
                    className="glow-button px-6 py-2 rounded-md"
                  >
                    Explore Products
                  </button>
                </div>
              )}
            </div>
          )}
          
          {/* Testimonials Section */}
          <Testimonials />
          
          {/* Footer */}
          {/* New Enhanced Chatbot */}
          <div id="chatbotContainer" className={`fixed bottom-4 right-4 z-40 ${showChatbot ? '' : 'hidden'}`}>
            <div className="glass rounded-lg shadow-lg overflow-hidden w-96 h-[450px] flex flex-col">
              <div className="p-4 bg-gradient-to-r from-cyan-500 to-blue-500 flex justify-between items-center">
                <div className="flex items-center gap-2">
                  <div className="w-8 h-8 rounded-full bg-black bg-opacity-20 flex items-center justify-center">
                    <i className="fas fa-robot text-black"></i>
                  </div>
                  <h3 className="text-lg font-bold text-black">Glow Assistant</h3>
                </div>
                <button className="text-black hover:text-gray-800" onClick={() => setShowChatbot(false)}>
                  <i className="fas fa-times"></i>
                </button>
              </div>
              <div id="chatbotMessages" className="flex-1 overflow-y-auto p-4 space-y-4">
                <div className="chatbot-message bot">
                  <div className="message-content">
                    <p>ðŸ‘‹ Hi there! I'm your Glow Assistant. How can I help you today?</p>
                  </div>
                </div>
                <div className="chatbot-message bot">
                  <div className="message-content">
                    <div className="flex flex-col gap-2">
                      <button className="chatbot-quick-reply" onClick={() => handleChatbotQuickReply('downloads')}>
                        <i className="fas fa-download mr-2"></i> My Downloads
                      </button>
                      <button className="chatbot-quick-reply" onClick={() => handleChatbotQuickReply('support')}>
                        <i className="fas fa-headset mr-2"></i> Contact Support
                      </button>
                      <button className="chatbot-quick-reply" onClick={() => handleChatbotQuickReply('about')}>
                        <i className="fas fa-info-circle mr-2"></i> About Glow Cart
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div className="p-4 border-t border-gray-700">
                <div className="flex gap-2">
                  <input 
                    id="chatbotInput" 
                    type="text" 
                    placeholder="Type a message..." 
                    className="flex-1 bg-gray-800 border border-gray-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500"
                    onKeyPress={(e) => {
                      if (e.key === 'Enter') {
                        handleChatbotSend();
                      }
                    }}
                  />
                  <button 
                    className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded-full"
                    onClick={() => handleChatbotSend()}
                  >
                    <i className="fas fa-paper-plane"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          {/* Support Contact Modal */}
          <div id="supportModal" className="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div className="glass p-8 rounded-xl max-w-md w-full">
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-2xl font-bold header-text">Contact Support</h2>
                <button className="text-gray-400 hover:text-white" onClick={() => document.getElementById('supportModal').classList.add('hidden')}>
                  <i className="fas fa-times text-xl"></i>
                </button>
              </div>
              
              <div className="mb-6">
                <p className="mb-4">Need help? Reach out to our support team:</p>
                <div className="flex items-center gap-3 p-3 bg-black bg-opacity-30 rounded-lg">
                  <i className="fas fa-envelope text-cyan-500 text-xl"></i>
                  <a href="mailto:cosmoscoderr.online@cosmoscoderr.online" className="text-cyan-400 hover:text-cyan-300 break-all">
                    cosmoscoderr.online@cosmoscoderr.online
                  </a>
                </div>
              </div>
              
              <button 
                className="w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-3 rounded-lg font-bold"
                onClick={() => window.location.href='mailto:cosmoscoderr.online@cosmoscoderr.online'}
              >
                <i className="fas fa-paper-plane mr-2"></i> Send Email
              </button>
            </div>
          </div>
          
          {/* Newsletter Confirmation Modal */}
          <div id="newsletterConfirmModal" className="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div className="glass p-8 rounded-xl max-w-md w-full">
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-2xl font-bold header-text">Subscription Confirmed!</h2>
                <button className="text-gray-400 hover:text-white" onClick={() => document.getElementById('newsletterConfirmModal').classList.add('hidden')}>
                  <i className="fas fa-times"></i>
                </button>
              </div>
              
              <div className="text-center">
                <div className="w-20 h-20 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full mx-auto flex items-center justify-center mb-6">
                  <i className="fas fa-check text-3xl text-black"></i>
                </div>
                
                <p className="text-gray-300 mb-6">Thank you for subscribing to our newsletter! You'll be the first to know about new products, special offers, and exclusive content.</p>
                
                <button className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black font-bold py-2 px-6 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300" onClick={() => document.getElementById('newsletterConfirmModal').classList.add('hidden')}>
                  Close
                </button>
              </div>
            </div>
          </div>
          
          {/* Welcome Modal for new users */}
          <div id="welcomeModal" className="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div className="glass p-8 rounded-xl max-w-md w-full animate-fadeIn">
              <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500"></div>
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-2xl font-bold header-text">Welcome to Glow Cart!</h2>
                <button className="text-gray-400 hover:text-white" onClick={() => document.getElementById('welcomeModal').classList.add('hidden')}>
                  <i className="fas fa-times"></i>
                </button>
              </div>
              
              <div className="text-center">
                <div className="w-24 h-24 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full mx-auto flex items-center justify-center mb-6 animate-pulse">
                  <i className="fas fa-star text-4xl text-black"></i>
                </div>
                
                <p className="text-gray-300 mb-4">Thank you for joining our cosmic marketplace! We're thrilled to have you aboard.</p>
                <p className="text-gray-300 mb-6">Explore our premium digital products, enjoy the futuristic shopping experience, and don't hesitate to reach out if you need any assistance.</p>
                
                <button className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black font-bold py-2 px-6 rounded hover:from-cyan-400 hover:to-blue-400 transition-all duration-300" onClick={() => document.getElementById('welcomeModal').classList.add('hidden')}>
                  Start Exploring
                </button>
              </div>
            </div>
          </div>
          
          {/* Chatbot Toggle Button */}
          <button 
            id="draggableChatbot"
            className="fixed bottom-4 left-4 z-40 w-14 h-14 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-300 chatbot-orb-button"
            onClick={() => setShowChatbot(true)}
            onMouseDown={(e) => handleChatbotDragStart(e)}
            onTouchStart={(e) => handleChatbotDragStart(e)}
          >
            <div className="chatbot-face">
              <div className="chatbot-eyes">
                <div className="chatbot-eye"></div>
                <div className="chatbot-eye"></div>
              </div>
              <div className="chatbot-mouth"></div>
            </div>
          </button>
          
          {/* Support Modal */}
          <div id="supportModal" className="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
            <div className="glass p-8 rounded-xl max-w-md w-full animate-fadeIn">
              <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-500"></div>
              <div className="flex justify-between items-center mb-6">
                <h2 className="text-2xl font-bold header-text">Contact Support</h2>
                <button className="text-gray-400 hover:text-white" onClick={() => document.getElementById('supportModal').classList.add('hidden')}>
                  <i className="fas fa-times"></i>
                </button>
              </div>
              
              <div className="space-y-6">
                <div className="bg-black bg-opacity-30 p-4 rounded-lg">
                  <h3 className="text-lg font-bold mb-2">Email Support</h3>
                  <p className="text-gray-400 mb-3">Send us an email and we'll get back to you within 24 hours.</p>
                  <a href="mailto:support@glowcart.com" className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded flex items-center justify-center gap-2 hover:from-cyan-400 hover:to-blue-400 transition-all duration-300">
                    <i className="fas fa-envelope"></i>
                    <span>Email Us</span>
                  </a>
                </div>
                
                <div className="bg-black bg-opacity-30 p-4 rounded-lg">
                  <h3 className="text-lg font-bold mb-2">Live Chat</h3>
                  <p className="text-gray-400 mb-3">Chat with our support team in real-time.</p>
                  <button onClick={() => { document.getElementById('supportModal').classList.add('hidden'); setShowChatbot(true); }} className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded flex items-center justify-center gap-2 w-full hover:from-cyan-400 hover:to-blue-400 transition-all duration-300">
                    <i className="fas fa-comments"></i>
                    <span>Start Chat</span>
                  </button>
                </div>
                
                <div className="bg-black bg-opacity-30 p-4 rounded-lg">
                  <h3 className="text-lg font-bold mb-2">FAQs</h3>
                  <p className="text-gray-400 mb-3">Check our frequently asked questions for quick answers.</p>
                  <a href="#" className="bg-gradient-to-r from-cyan-500 to-blue-500 text-black px-4 py-2 rounded flex items-center justify-center gap-2 hover:from-cyan-400 hover:to-blue-400 transition-all duration-300">
                    <i className="fas fa-question-circle"></i>
                    <span>View FAQs</span>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <footer className="mt-32 glass rounded-t-xl p-10">
            <div className="max-w-6xl mx-auto">
              <div className="flex flex-col md:flex-row justify-between items-center mb-10">
                <h2 className="text-3xl font-bold header-text mb-6 md:mb-0">Glow<span className="text-cyan-400">Cart</span></h2>
                <div className="flex gap-6">
                </div>
              </div>
              
              <div className="grid md:grid-cols-4 gap-8 mb-10">
                <div>
                  <h3 className="text-lg font-bold mb-4">Shop</h3>
                  <ul className="space-y-2">
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">All Products</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Featured</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">New Arrivals</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Pricing</a></li>
                  </ul>
                </div>
                <div>
                  <h3 className="text-lg font-bold mb-4">Company</h3>
                  <ul className="space-y-2">
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">About Us</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Careers</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Press</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">News</a></li>
                  </ul>
                </div>
                <div>
                  <h3 className="text-lg font-bold mb-4">Support</h3>
                  <ul className="space-y-2">
                    <li><a href="#" onClick={() => document.getElementById('supportModal').classList.remove('hidden')} className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Contact Us</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">FAQ</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Returns</a></li>
                    <li><a href="#" className="text-gray-400 hover:text-cyan-400 transition-colors duration-300">Live Chat</a></li>
                  </ul>
                </div>
                <div>
                  <h3 className="text-lg font-bold mb-4">Stay Updated</h3>
                  <p className="text-gray-400 mb-4">Subscribe to our newsletter for the latest updates and offers.</p>
                  <div className="flex">
                    <input type="email" placeholder="Your email" className="bg-gray-800 text-white px-4 py-2 rounded-l focus:outline-none focus:ring-2 focus:ring-cyan-500 w-full" />
                    <button className="bg-cyan-500 text-black px-4 py-2 rounded-r hover:bg-cyan-400 transition-colors duration-300">
                      <i className="fas fa-paper-plane"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <div className="pt-8 border-t border-gray-800 text-center text-gray-500">
                <p>Â© {new Date().getFullYear()} GlowCart. All rights reserved.</p>
                <div className="flex justify-center gap-6 mt-4">
                  <a href="#" className="text-gray-500 hover:text-gray-400 transition-colors duration-300">Privacy Policy</a>
                  <a href="#" className="text-gray-500 hover:text-gray-400 transition-colors duration-300">Terms of Service</a>
                  <a href="#" className="text-gray-500 hover:text-gray-400 transition-colors duration-300">Cookie Policy</a>
                </div>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>